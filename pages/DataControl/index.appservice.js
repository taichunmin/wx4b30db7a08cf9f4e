$gwx_XC_56=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_56 || [];
function gz$gwx_XC_56_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_56_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_56_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_56_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'t-message'])
Z([3,'t-toast'])
Z([3,'onSetNewCardVisibleChange'])
Z([3,'center'])
Z([[7],[3,'visible_setNewCard']])
Z([[7],[3,'is_supportNFCTag']])
Z([3,'onCardExportVisibleChange'])
Z(z[3])
Z([[7],[3,'visible_cardExport']])
Z([[2,'&&'],[[2,'&&'],[[6],[[7],[3,'cardhub']],[3,'has_hf']],[[2,'=='],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'cardtype']],[1,1]]],[[2,'>'],[[6],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'data_hex']],[3,'length']],[1,0]]])
Z([3,'onCardSelectChange'])
Z(z[3])
Z([[7],[3,'visible_cardSelect']])
Z([3,'cardselect-popup-block'])
Z([[6],[[7],[3,'cardhub']],[3,'has_id']])
Z([[6],[[7],[3,'cardhub']],[3,'has_hf']])
Z([3,'onBeforeBack'])
Z(z[3])
Z([[7],[3,'showContainerPage']])
Z([3,'data-content'])
Z([3,'closeMessage'])
Z([[6],[[7],[3,'showMessage']],[3,'message']])
Z([3,'close'])
Z([[6],[[7],[3,'showMessage']],[3,'theme']])
Z([[6],[[7],[3,'showMessage']],[3,'show']])
Z([[7],[3,'is_decoding']])
Z([[6],[[7],[3,'BLE']],[3,'cardInfo']])
Z([3,'card'])
Z([[6],[[7],[3,'item']],[3,'no']])
Z([[4],[[5],[[5],[[2,'-'],[1,24]]],[1,12]]])
Z([3,'square'])
Z([[6],[[7],[3,'BLE']],[3,'Sectors']])
Z([3,'sector'])
Z([3,'card-sector-item-data'])
Z([a,[3,'background:'],[[6],[[7],[3,'item']],[3,'data']]])
Z([[6],[[7],[3,'item']],[3,'working']])
Z([3,'2000'])
Z([3,'32rpx'])
Z([3,'custom'])
Z([3,'setting-1'])
Z(z[37])
Z([3,'indicator'])
Z([3,'card-sector-item-keys'])
Z([[6],[[7],[3,'item']],[3,'workingA']])
Z(z[36])
Z([3,'12rpx'])
Z([3,'circular'])
Z([[6],[[7],[3,'item']],[3,'workingB']])
Z(z[36])
Z(z[45])
Z(z[46])
Z([3,'onStopControl'])
Z([[2,'?:'],[[7],[3,'decod_stoping']],[1,'btn_disabled'],[1,'']])
Z([[7],[3,'decod_stoping']])
Z([3,'large'])
Z([3,'external-class'])
Z([3,'danger'])
Z([[2,'&&'],[[2,'!'],[[6],[[7],[3,'cardhub']],[3,'has_id']]],[[2,'!'],[[6],[[7],[3,'cardhub']],[3,'has_hf']]]])
Z([[2,'>'],[[6],[[6],[[7],[3,'cardhub']],[3,'file_name']],[3,'length']],[1,0]])
Z(z[14])
Z([3,'green'])
Z([[6],[[6],[[7],[3,'cardhub']],[3,'ID']],[3,'no']])
Z(z[29])
Z(z[30])
Z([[6],[[6],[[6],[[7],[3,'cardhub']],[3,'ID']],[3,'collapse']],[3,'show']])
Z([3,'onDataCollapse'])
Z([3,'data-head-icon'])
Z([[2,'?:'],[[6],[[6],[[6],[[7],[3,'cardhub']],[3,'ID']],[3,'collapse']],[3,'expand']],[1,'chevron-up-s'],[1,'chevron-down-s']])
Z([3,'52rpx'])
Z([[6],[[6],[[6],[[7],[3,'cardhub']],[3,'ID']],[3,'collapse']],[3,'expand']])
Z(z[15])
Z([[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'no']])
Z(z[29])
Z(z[30])
Z(z[19])
Z([3,'touchEnd'])
Z([3,'touchEvent'])
Z([3,'touchstart'])
Z([a,[3,'buttontouch buttontouch-'],[[6],[[7],[3,'buttontouchmove']],[3,'touch']]])
Z([[6],[[7],[3,'buttontouchmove']],[3,'arrow']])
Z(z[68])
Z([3,'button-block'])
Z(z[81])
Z([[7],[3,'is_device_link']])
Z([3,'onDeviceControl'])
Z([3,'onekeydecode'])
Z(z[54])
Z(z[84])
Z([3,'readcard'])
Z(z[54])
Z(z[84])
Z([3,'formatcard'])
Z(z[54])
Z(z[84])
Z([3,'decodebykey'])
Z(z[54])
Z(z[84])
Z([3,'decodebyfile'])
Z(z[54])
Z(z[84])
Z([3,'setcarddata'])
Z([[2,'&&'],[[2,'!'],[[6],[[7],[3,'cardhub']],[3,'has_id']]],[[2,'!'],[[6],[[7],[3,'cardhub']],[3,'has_hf']]]])
Z(z[54])
Z(z[84])
Z([3,'simulateTag'])
Z(z[54])
Z([3,'onDetectionKey'])
Z([3,'detectionkeys'])
Z(z[54])
Z([3,'onDataControl'])
Z([3,'NFC_SimulateKey'])
Z([[2,'!'],[[2,'&&'],[[2,'&&'],[[6],[[7],[3,'cardhub']],[3,'has_hf']],[[2,'=='],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'cardtype']],[1,1]]],[[2,'>'],[[6],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'data_hex']],[3,'length']],[1,0]]]])
Z(z[54])
Z(z[109])
Z([3,'set_newcard'])
Z(z[54])
Z(z[109])
Z([3,'data_import'])
Z(z[54])
Z([[2,'||'],[[6],[[7],[3,'cardhub']],[3,'has_id']],[[2,'&&'],[[6],[[7],[3,'cardhub']],[3,'has_hf']],[[2,'>'],[[6],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'data_hex']],[3,'length']],[1,0]]]])
Z(z[109])
Z([3,'data_export'])
Z(z[54])
Z(z[9])
Z(z[109])
Z([3,'onekey_analysis'])
Z(z[54])
Z([[2,'&&'],[[6],[[7],[3,'cardhub']],[3,'has_hf']],[[2,'>'],[[6],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'data_hex']],[3,'length']],[1,0]]])
Z(z[109])
Z([3,'data_comp'])
Z(z[54])
Z(z[127])
Z(z[109])
Z([3,'data_modify'])
Z(z[54])
Z(z[9])
Z(z[109])
Z([3,'onekey_encrypt'])
Z(z[54])
Z([[2,'||'],[[6],[[7],[3,'cardhub']],[3,'has_id']],[[2,'&&'],[[6],[[7],[3,'cardhub']],[3,'has_hf']],[[2,'>'],[[6],[[6],[[6],[[7],[3,'cardhub']],[3,'HF']],[3,'data_hex']],[3,'length']],[1,0]]]])
Z(z[109])
Z([3,'make_cardhub'])
Z(z[54])
Z([3,'submitData'])
Z([3,'取消'])
Z([[7],[3,'cardHubAddressError']])
Z([[7],[3,'cardHubNameError']])
Z([[7],[3,'cardhubAddress']])
Z([[7],[3,'cardhubName']])
Z([3,'制作'])
Z([[7],[3,'showEditDialog']])
Z([3,'制作卡包'])
Z([3,'closeEncryptDialog'])
Z([3,'DoOnekeyEncrypt'])
Z([3,'否'])
Z([3,'是'])
Z([3,'本操作将会对默认密钥进行加密处理，数据会有变动，请谨慎操作。是否进行一键加密？'])
Z([3,'一键加密'])
Z([[7],[3,'showEncryptDialog']])
Z([3,'closeFormatCardDialog'])
Z([3,'DoFormatCardDialog'])
Z(z[154])
Z(z[155])
Z([3,'本操作将还原已解码的IC卡片密钥及数据到出厂默认数值。卡片还原后将会丢失原密钥。为避免造成不必要的损失，请先备份好您的卡片数据！如果卡片未解码会提示先进行解码操作。是否开始格式化卡片？'])
Z([3,'格式化卡数据'])
Z([[6],[[7],[3,'FormatCardDialog']],[3,'show']])
Z([3,'closeExportDialog'])
Z([3,'DoExportDialog'])
Z(z[144])
Z([3,'确定'])
Z([3,'导出数据'])
Z([[7],[3,'showExportDialog']])
Z([3,'content'])
Z([3,'onExportNameInput'])
Z([1,true])
Z([3,'数据名称'])
Z([3,'error'])
Z([[7],[3,'input_style']])
Z([[7],[3,'exportNameError']])
Z([[7],[3,'exportName']])
Z([3,'closeSetCardDataDialog'])
Z([3,'SetCardDataAndBack'])
Z([[9],[[9],[[8],'content',[1,'取消']],[[8],'loading',[[6],[[7],[3,'SetCardDataDialog']],[3,'stoping']]]],[[8],'disabled',[[6],[[7],[3,'SetCardDataDialog']],[3,'stoping']]]])
Z([[9],[[9],[[8],'content',[1,'写卡']],[[8],'loading',[[2,'&&'],[[2,'!'],[[6],[[7],[3,'SetCardDataDialog']],[3,'stoping']]],[[6],[[7],[3,'SetCardDataDialog']],[3,'writing']]]]],[[8],'disabled',[[6],[[7],[3,'SetCardDataDialog']],[3,'writing']]]])
Z([3,'写卡'])
Z([[6],[[7],[3,'SetCardDataDialog']],[3,'show']])
Z([3,'setdata-recommend'])
Z(z[172])
Z([[6],[[7],[3,'SetCardDataDialog']],[3,'enable']])
Z([3,'onAutoShowChange'])
Z([[6],[[7],[3,'SetCardDataDialog']],[3,'NoAutoShow']])
Z([3,'radio-show'])
Z([3,'下次不再自动提示'])
Z([3,'radio-class-border'])
Z([3,'closeSimulateTagDialog'])
Z([3,'卡模拟'])
Z([[6],[[7],[3,'SimulateTagDialog']],[3,'show']])
Z(z[172])
Z([[6],[[7],[3,'SimulateTagDialog']],[3,'list']])
Z([3,'simulate'])
Z([3,'SimulateTagAndBack'])
Z([[2,'?:'],[[2,'||'],[[6],[[7],[3,'item']],[3,'disabled']],[[2,'&&'],[[2,'!'],[[6],[[7],[3,'SimulateTagDialog']],[3,'stoping']]],[[6],[[7],[3,'SimulateTagDialog']],[3,'simulate']]]],[1,'btn_disabled'],[1,'']])
Z([[6],[[7],[3,'item']],[3,'id']])
Z([[6],[[7],[3,'item']],[3,'description']])
Z([[6],[[7],[3,'item']],[3,'title']])
Z([3,'right-icon'])
Z([[6],[[7],[3,'item']],[3,'loading']])
Z([3,'wrapper'])
Z([3,'40rpx'])
Z(z[46])
Z([3,'chevron-right'])
Z(z[208])
Z([3,'closeOnekeyDecodeDialog'])
Z([3,'DoOnekeyDecodeDialog'])
Z(z[144])
Z([3,'一键解码'])
Z([3,'数据未全部读取，是否开始解码？'])
Z(z[215])
Z([[7],[3,'showOnekeyDecodeDialog']])
Z([3,'closeWriteCardDialog'])
Z([3,'DoWriteCardDialog'])
Z(z[144])
Z(z[184])
Z([3,'数据未全部解码，是否直接写卡？'])
Z(z[184])
Z([[7],[3,'showWriteCardDialog']])
Z([3,'closeDoDetectDialog'])
Z([3,'DoDetectDialog'])
Z(z[144])
Z([3,'侦测'])
Z([a,[[7],[3,'showDetectDialogMsg']],[3,'，是否开启密流侦测？']])
Z([3,'密流侦测'])
Z([[7],[3,'showDetectDialog']])
Z([[6],[[7],[3,'GetDataDialog']],[3,'multiBtnList']])
Z([3,'GetDataDialogAction'])
Z([3,'vertical'])
Z([3,'无数据，请先获取数据再选择后续操作'])
Z([3,'获取数据'])
Z([[6],[[7],[3,'GetDataDialog']],[3,'show']])
Z([3,'CopyDataAnalysisCloseDialog'])
Z([3,'复制分析数据'])
Z([3,'数据分析结果'])
Z([[6],[[7],[3,'DataAnalysisDialog']],[3,'show']])
Z([3,'DoDecodeByKey'])
Z(z[144])
Z(z[215])
Z([[6],[[7],[3,'inputKeyDecodeDialog']],[3,'value']])
Z([[6],[[7],[3,'inputKeyDecodeDialog']],[3,'show']])
Z([3,'输入密码'])
Z([3,'closeQuitDialog'])
Z([3,'quitAndBack'])
Z(z[144])
Z([3,'退出'])
Z([3,'是否退出当前操作？'])
Z(z[252])
Z([[6],[[7],[3,'QuitDecode']],[3,'show']])
Z([3,'closeCheckGoOnDialog'])
Z([3,'quitAndGoOn'])
Z(z[144])
Z([a,[3,'继续('],[[6],[[7],[3,'waitforCheckGoOnDialog']],[3,'time']],[3,'s)']])
Z([3,'发现有未完成的解码记录，是否继续完成？'])
Z([3,'继续解码'])
Z([[6],[[7],[3,'waitforCheckGoOnDialog']],[3,'show']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_56_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_56_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_56=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_56=true;
var x=['./pages/DataControl/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_56_1()
var cSZ=_n('t-message')
_rz(z,cSZ,'id',0,e,s,gg)
_(r,cSZ)
var oTZ=_n('t-toast')
_rz(z,oTZ,'id',1,e,s,gg)
_(r,oTZ)
var lUZ=_mz(z,'t-popup',['bind:visible-change',2,'placement',1,'visible',2],[],e,s,gg)
var aVZ=_v()
_(lUZ,aVZ)
if(_oz(z,5,e,s,gg)){aVZ.wxVkey=1
}
aVZ.wxXCkey=1
_(r,lUZ)
var tWZ=_mz(z,'t-popup',['bind:visible-change',6,'placement',1,'visible',2],[],e,s,gg)
var eXZ=_v()
_(tWZ,eXZ)
if(_oz(z,9,e,s,gg)){eXZ.wxVkey=1
}
eXZ.wxXCkey=1
_(r,tWZ)
var bYZ=_mz(z,'t-popup',['bind:visible-change',10,'placement',1,'visible',2],[],e,s,gg)
var oZZ=_n('view')
_rz(z,oZZ,'class',13,e,s,gg)
var x1Z=_v()
_(oZZ,x1Z)
if(_oz(z,14,e,s,gg)){x1Z.wxVkey=1
}
var o2Z=_v()
_(oZZ,o2Z)
if(_oz(z,15,e,s,gg)){o2Z.wxVkey=1
}
x1Z.wxXCkey=1
o2Z.wxXCkey=1
_(bYZ,oZZ)
_(r,bYZ)
var f3Z=_mz(z,'page-container',['bind:beforeleave',16,'position',1,'show',2],[],e,s,gg)
var c4Z=_n('view')
_rz(z,c4Z,'class',19,e,s,gg)
var o6Z=_mz(z,'t-notice-bar',['bind:click',20,'content',1,'suffixIcon',2,'theme',3,'visible',4],[],e,s,gg)
_(c4Z,o6Z)
var h5Z=_v()
_(c4Z,h5Z)
if(_oz(z,25,e,s,gg)){h5Z.wxVkey=1
var c7Z=_v()
_(h5Z,c7Z)
var o8Z=function(a0Z,l9Z,tA1,gg){
var bC1=_mz(z,'t-badge',['count',28,'offset',1,'shape',2],[],a0Z,l9Z,gg)
_(tA1,bC1)
return tA1
}
c7Z.wxXCkey=4
_2z(z,26,o8Z,e,s,gg,c7Z,'item','index','card')
var oD1=_v()
_(h5Z,oD1)
var xE1=function(fG1,oF1,cH1,gg){
var oJ1=_mz(z,'view',['class',33,'style',1],[],fG1,oF1,gg)
var cK1=_v()
_(oJ1,cK1)
if(_oz(z,35,fG1,oF1,gg)){cK1.wxVkey=1
var oL1=_mz(z,'t-loading',['duration',36,'size',1,'theme',2],[],fG1,oF1,gg)
var lM1=_mz(z,'t-icon',['name',39,'size',1,'slot',2],[],fG1,oF1,gg)
_(oL1,lM1)
_(cK1,oL1)
}
var aN1=_n('view')
_rz(z,aN1,'class',42,fG1,oF1,gg)
var tO1=_v()
_(aN1,tO1)
if(_oz(z,43,fG1,oF1,gg)){tO1.wxVkey=1
var bQ1=_mz(z,'t-loading',['duration',44,'size',1,'theme',2],[],fG1,oF1,gg)
_(tO1,bQ1)
}
var eP1=_v()
_(aN1,eP1)
if(_oz(z,47,fG1,oF1,gg)){eP1.wxVkey=1
var oR1=_mz(z,'t-loading',['duration',48,'size',1,'theme',2],[],fG1,oF1,gg)
_(eP1,oR1)
}
tO1.wxXCkey=1
tO1.wxXCkey=3
eP1.wxXCkey=1
eP1.wxXCkey=3
_(oJ1,aN1)
cK1.wxXCkey=1
cK1.wxXCkey=3
_(cH1,oJ1)
return cH1
}
oD1.wxXCkey=4
_2z(z,31,xE1,e,s,gg,oD1,'item','index','sector')
var xS1=_mz(z,'t-button',['block',-1,'bind:tap',51,'class',1,'loading',2,'size',3,'tClass',4,'theme',5],[],e,s,gg)
_(h5Z,xS1)
}
else{h5Z.wxVkey=2
var oT1=_v()
_(h5Z,oT1)
if(_oz(z,57,e,s,gg)){oT1.wxVkey=1
}
else{oT1.wxVkey=2
var fU1=_v()
_(oT1,fU1)
if(_oz(z,58,e,s,gg)){fU1.wxVkey=1
}
var cV1=_v()
_(oT1,cV1)
if(_oz(z,59,e,s,gg)){cV1.wxVkey=1
var cY1=_mz(z,'t-badge',['color',60,'count',1,'offset',2,'shape',3],[],e,s,gg)
var oZ1=_v()
_(cY1,oZ1)
if(_oz(z,64,e,s,gg)){oZ1.wxVkey=1
var l11=_mz(z,'t-icon',['bind:click',65,'class',1,'name',2,'size',3],[],e,s,gg)
_(oZ1,l11)
}
oZ1.wxXCkey=1
oZ1.wxXCkey=3
_(cV1,cY1)
var oX1=_v()
_(cV1,oX1)
if(_oz(z,69,e,s,gg)){oX1.wxVkey=1
}
oX1.wxXCkey=1
}
var hW1=_v()
_(oT1,hW1)
if(_oz(z,70,e,s,gg)){hW1.wxVkey=1
var a21=_mz(z,'t-badge',['count',71,'offset',1,'shape',2],[],e,s,gg)
_(hW1,a21)
}
fU1.wxXCkey=1
cV1.wxXCkey=1
cV1.wxXCkey=3
hW1.wxXCkey=1
hW1.wxXCkey=3
}
var t31=_n('view')
_rz(z,t31,'class',74,e,s,gg)
var e41=_mz(z,'view',['bindtouchend',75,'bindtouchmove',1,'bindtouchstart',2,'class',3],[],e,s,gg)
var b51=_mz(z,'t-icon',['name',79,'size',1],[],e,s,gg)
_(e41,b51)
_(t31,e41)
var o61=_mz(z,'view',['class',81,'id',1],[],e,s,gg)
var x71=_v()
_(o61,x71)
if(_oz(z,83,e,s,gg)){x71.wxVkey=1
var oD2=_mz(z,'t-button',['block',-1,'bind:tap',84,'data-id',1,'size',2],[],e,s,gg)
_(x71,oD2)
var lE2=_mz(z,'t-button',['block',-1,'bind:tap',87,'data-id',1,'size',2],[],e,s,gg)
_(x71,lE2)
var aF2=_mz(z,'t-button',['block',-1,'bind:tap',90,'data-id',1,'size',2],[],e,s,gg)
_(x71,aF2)
var tG2=_mz(z,'t-button',['block',-1,'bind:tap',93,'data-id',1,'size',2],[],e,s,gg)
_(x71,tG2)
var eH2=_mz(z,'t-button',['block',-1,'bind:tap',96,'data-id',1,'size',2],[],e,s,gg)
_(x71,eH2)
var bI2=_mz(z,'t-button',['block',-1,'bind:tap',99,'data-id',1,'disabled',2,'size',3],[],e,s,gg)
_(x71,bI2)
var oJ2=_mz(z,'t-button',['block',-1,'bind:tap',103,'data-id',1,'size',2],[],e,s,gg)
_(x71,oJ2)
var xK2=_mz(z,'t-button',['block',-1,'bind:tap',106,'data-id',1,'size',2],[],e,s,gg)
_(x71,xK2)
var oL2=_mz(z,'t-button',['block',-1,'bind:tap',109,'data-id',1,'disabled',2,'size',3],[],e,s,gg)
_(x71,oL2)
}
var fM2=_mz(z,'t-button',['block',-1,'bind:tap',113,'data-id',1,'size',2],[],e,s,gg)
_(o61,fM2)
var cN2=_mz(z,'t-button',['block',-1,'bind:tap',116,'data-id',1,'size',2],[],e,s,gg)
_(o61,cN2)
var o81=_v()
_(o61,o81)
if(_oz(z,119,e,s,gg)){o81.wxVkey=1
var hO2=_mz(z,'t-button',['block',-1,'bind:tap',120,'data-id',1,'size',2],[],e,s,gg)
_(o81,hO2)
}
var f91=_v()
_(o61,f91)
if(_oz(z,123,e,s,gg)){f91.wxVkey=1
var oP2=_mz(z,'t-button',['block',-1,'bind:tap',124,'data-id',1,'size',2],[],e,s,gg)
_(f91,oP2)
}
var c01=_v()
_(o61,c01)
if(_oz(z,127,e,s,gg)){c01.wxVkey=1
var cQ2=_mz(z,'t-button',['block',-1,'bind:tap',128,'data-id',1,'size',2],[],e,s,gg)
_(c01,cQ2)
}
var hA2=_v()
_(o61,hA2)
if(_oz(z,131,e,s,gg)){hA2.wxVkey=1
var oR2=_mz(z,'t-button',['block',-1,'bind:tap',132,'data-id',1,'size',2],[],e,s,gg)
_(hA2,oR2)
}
var oB2=_v()
_(o61,oB2)
if(_oz(z,135,e,s,gg)){oB2.wxVkey=1
var lS2=_mz(z,'t-button',['block',-1,'bind:tap',136,'data-id',1,'size',2],[],e,s,gg)
_(oB2,lS2)
}
var cC2=_v()
_(o61,cC2)
if(_oz(z,139,e,s,gg)){cC2.wxVkey=1
var aT2=_mz(z,'t-button',['block',-1,'bind:tap',140,'data-id',1,'size',2],[],e,s,gg)
_(cC2,aT2)
}
x71.wxXCkey=1
x71.wxXCkey=3
o81.wxXCkey=1
o81.wxXCkey=3
f91.wxXCkey=1
f91.wxXCkey=3
c01.wxXCkey=1
c01.wxXCkey=3
hA2.wxXCkey=1
hA2.wxXCkey=3
oB2.wxXCkey=1
oB2.wxXCkey=3
cC2.wxXCkey=1
cC2.wxXCkey=3
_(t31,o61)
_(h5Z,t31)
oT1.wxXCkey=1
oT1.wxXCkey=3
}
h5Z.wxXCkey=1
h5Z.wxXCkey=3
h5Z.wxXCkey=3
_(f3Z,c4Z)
_(r,f3Z)
var tU2=_mz(z,'makeCardHub',['bind:confirm',143,'cancel',1,'cardHubAddressError',2,'cardHubNameError',3,'cardhubAddress',4,'cardhubName',5,'confirm',6,'showDialog',7,'title',8],[],e,s,gg)
_(r,tU2)
var eV2=_mz(z,'t-dialog',['bind:cancel',152,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,eV2)
var bW2=_mz(z,'t-dialog',['bind:cancel',159,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,bW2)
var oX2=_mz(z,'t-dialog',['bind:cancel',166,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'title',4,'visible',5],[],e,s,gg)
var xY2=_n('view')
_rz(z,xY2,'slot',172,e,s,gg)
var oZ2=_mz(z,'t-input',['bindchange',173,'borderless',1,'placeholder',2,'status',3,'style',4,'tips',5,'value',6],[],e,s,gg)
_(xY2,oZ2)
_(oX2,xY2)
_(r,oX2)
var f12=_mz(z,'t-dialog',['bind:cancel',180,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'title',4,'visible',5],[],e,s,gg)
var c22=_mz(z,'view',['class',186,'slot',1],[],e,s,gg)
var h32=_v()
_(c22,h32)
if(_oz(z,188,e,s,gg)){h32.wxVkey=1
var o42=_mz(z,'t-radio',['defaultChecked',-1,'bind:change',189,'checked',1,'class',2,'label',3,'tClassBorder',4],[],e,s,gg)
_(h32,o42)
}
h32.wxXCkey=1
h32.wxXCkey=3
_(f12,c22)
_(r,f12)
var c52=_mz(z,'t-dialog',['closeBtn',-1,'bind:close',194,'title',1,'visible',2],[],e,s,gg)
var o62=_n('view')
_rz(z,o62,'slot',197,e,s,gg)
var l72=_v()
_(o62,l72)
var a82=function(e02,t92,bA3,gg){
var xC3=_mz(z,'t-cell',['hover',-1,'bind:click',200,'class',1,'data-id',2,'description',3,'title',4],[],e02,t92,gg)
var oD3=_n('view')
_rz(z,oD3,'slot',205,e02,t92,gg)
var fE3=_v()
_(oD3,fE3)
if(_oz(z,206,e02,t92,gg)){fE3.wxVkey=1
var cF3=_mz(z,'t-loading',['class',207,'size',1,'theme',2],[],e02,t92,gg)
_(fE3,cF3)
}
else{fE3.wxVkey=2
var hG3=_mz(z,'t-icon',['name',210,'size',1],[],e02,t92,gg)
_(fE3,hG3)
}
fE3.wxXCkey=1
fE3.wxXCkey=3
fE3.wxXCkey=3
_(xC3,oD3)
_(bA3,xC3)
return bA3
}
l72.wxXCkey=4
_2z(z,198,a82,e,s,gg,l72,'item','index','simulate')
_(c52,o62)
_(r,c52)
var oH3=_mz(z,'t-dialog',['bind:cancel',212,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,oH3)
var cI3=_mz(z,'t-dialog',['bind:cancel',219,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,cI3)
var oJ3=_mz(z,'t-dialog',['bind:cancel',226,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,oJ3)
var lK3=_mz(z,'t-dialog',['actions',233,'bind:action',1,'buttonLayout',2,'content',3,'title',4,'visible',5],[],e,s,gg)
_(r,lK3)
var aL3=_mz(z,'t-dialog',['closeBtn',-1,'bind:confirm',239,'confirmBtn',1,'title',2,'visible',3],[],e,s,gg)
_(r,aL3)
var tM3=_mz(z,'makeKeyStore',['bind:confirm',243,'cancel',1,'confirm',2,'inputKeyValue',3,'showDialog',4,'title',5],[],e,s,gg)
_(r,tM3)
var eN3=_mz(z,'t-dialog',['bind:cancel',249,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,eN3)
var bO3=_mz(z,'t-dialog',['bind:cancel',256,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,bO3)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_56";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_56();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/DataControl/index.wxml'] = [$gwx_XC_56, './pages/DataControl/index.wxml'];else __wxAppCode__['pages/DataControl/index.wxml'] = $gwx_XC_56( './pages/DataControl/index.wxml' );
	;__wxRoute = "pages/DataControl/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/DataControl/index.js";define("pages/DataControl/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var a,t=require("../../@babel/runtime/helpers/toConsumableArray"),e=require("../../@babel/runtime/helpers/regeneratorRuntime"),d=require("../../@babel/runtime/helpers/asyncToGenerator"),i=(a=require("tdesign-miniprogram/toast/index"))&&a.__esModule?a:{default:a},s=require("../../utils/cardUtil"),o=require("../../utils/util"),r=require("../../utils/fileUtil"),c=require("../../utils/deviceUtil");var n=getApp();Page({data:{data_work_height:n.globalData.height,the1rpx:n.globalData.width/750,QuitDecode:{show:!1,wait:!1},showContainerPage:!0,is_supportNFCTag:!1,is_decoding:!1,decod_stoping:!1,is_device_link:!1,pre_execute:"",cardhub:{has_id:!1,has_hf:!1,select:-1,ID:{no:0,collapse:{show:!1,expand:!0},cardtype:0,data_info:{uid:[],size:0,type:"",freq:""},data_orihex:[],data_hex:[],info:"",card_type:"",card_info:"",card_id:"",data_text:""},HF:{no:"0",cardtype:0,data_info:{uid:[],size:0,ATQA:[],sak:0},data_orihex:[],data_hex:[],info:"",card_type:"",card_info:"",card_id:"",data_text:"",data_analysis_text:""},tip_text:"",file_name:""},select:{control:"",id:-1,data_hex:[],data_info:{},data_hash:[]},buttontouchmove:{MaxHeight:0,MinHeight:0,showScroll:!0,Height:0,ToTop:!1,touch:"",arrow:"chevron-up-double-s",flag:0,lastX:0,lastY:0,listHeight:0},showMessage:{show:!1,theme:"info",message:"",durationID:0},scrollToView:"card_data",showEditDialog:!1,cardhubName:"",cardhubAddress:"",cardHubNameError:"",cardHubAddressError:"",showEncryptDialog:!1,showExportDialog:!1,showOnekeyDecodeDialog:!1,showWriteCardDialog:!1,showDetectDialog:!1,showDetectDialogMsg:"该卡暂不支持解码",GetDataDialog:{show:!1,multiBtnList:[{content:"取消",theme:"danger"},{content:"导入数据",theme:"primary"},{content:"一键解码",theme:"primary"}]},SetCardDataDialog:{enable:!0,NoAutoShow:!1,show:!1,name:"",tip:"",writing:!1,stoping:!1},SimulateTagDialog:{list:[{id:"full",title:"完整模式",description:"模拟成标准门禁卡",loading:!1,disabled:!1},{id:"readonly",title:"只读模式",description:"卡数据不能被修改。滚动码卡等需要修改数据的门禁卡可能无法使用",loading:!1,disabled:!1},{id:"test",title:"检测模式",description:"用于检测门禁卡是否有滚动码、防火墙",loading:!1,disabled:!1},{id:"readTag",title:"读取设备模拟数据",description:"读取出设备上当前模拟卡的数据",loading:!1,disabled:!1}],show:!1,simulate:!1,stoping:!1},DataAnalysisDialog:{show:!1,content:""},FormatCardDialog:{show:!1,confirm:!1},inputKeyDecodeDialog:{show:!1,value:"",total:0},waitforCheckGoOnDialog:{show:!1,ID:0,time:0,callback:function(a){}},input_style:"border-bottom: 0.5px solid rgba(220,220,220,1);",exportName:"",exportNameError:"",BLE:{deviceId:"",TEID:0,cardInfo:[],Sectors:[],message:"",message_more:""},visible_cardExport:!1,visible_cardSelect:!1,visible_setNewCard:!1,_deviceutil:new c.deviceUtil},onLoad:function(a){this.data._deviceutil=new c.deviceUtil;var t="设备未连接";if(this.data.BLE.deviceId=n.globalData.data.devices.deviceId,!(0,o.stringIsEmpty)(this.data.BLE.deviceId)&&n.globalData.data.bluetooth.IsDeviceLink(this.data.BLE.deviceId)){var e=n.globalData.data.bluetooth.GetDeviceInfo(this.data.BLE.deviceId).version;this.data.BLE.TEID=this.data._deviceutil.GetDeviceTEID(e),t=this.data._deviceutil.GetDeviceModeName(e),this.data.is_supportNFCTag=this.data._deviceutil.SupportNFCTag(this.data.BLE.TEID),this.setData({is_device_link:!0,is_supportNFCTag:this.data.is_supportNFCTag}),(0,o.stringIsEmpty)(a.control)||this.DoDeviceControl(a.control)}if(wx.setNavigationBarTitle({title:t}),a.data){var d=JSON.parse(decodeURIComponent(a.data));this.setCardData(d.name,d.cardtype,d.info,d.data)}else if(a.decodedata){var i=JSON.parse(a.decodedata);this.updateReadCardData(i)}else this.updateScrollHeight()},setPreExecute:function(a){this.data.pre_execute=a},setCardData:function(a,t,e,d){var i=new s.cardUtil;this.initCardData(),t===i.card_type.id?(this.data.cardhub.has_id=!0,this.data.cardhub.ID.cardtype=t,this.data.cardhub.ID.info=e,this.data.cardhub.ID.data_hex=d,this.data.cardhub.ID.data_orihex=d):(this.data.cardhub.has_hf=!0,this.data.cardhub.HF.cardtype=t,this.data.cardhub.HF.info=e,this.data.cardhub.HF.data_hex=d,this.data.cardhub.HF.data_orihex=d),a.length>0&&this.setData({"cardhub.file_name":a}),this.updateCardData()},initCardData:function(){this.data.cardhub.has_id=!1,this.data.cardhub.ID.data_hex=[],this.data.cardhub.ID.data_orihex=[],this.data.cardhub.ID.info="",this.data.cardhub.ID.data_text="",this.data.cardhub.ID.card_type="",this.data.cardhub.ID.card_info="",this.data.cardhub.ID.card_id="",this.data.cardhub.has_hf=!1,this.data.cardhub.HF.data_hex=[],this.data.cardhub.HF.data_orihex=[],this.data.cardhub.HF.info="",this.data.cardhub.HF.data_text="",this.data.cardhub.HF.card_type="",this.data.cardhub.HF.card_info="",this.data.cardhub.HF.card_id="",this.data.cardhub.HF.data_analysis_text="",this.data.cardhub.tip_text="",this.data.cardhub.file_name=""},updateCardData:function(){var a=new s.cardUtil,t="";if(this.data.cardhub.has_id){var e=a.getCardInfo(this.data.cardhub.ID.cardtype,this.data.cardhub.ID.info,null),d=a.getCardData(this.data.cardhub.ID.cardtype,this.data.cardhub.ID.data_hex,this.data.cardhub.ID.data_orihex);this.data.cardhub.ID.data_text=d.str_data,this.data.cardhub.ID.card_type=e.Type,this.data.cardhub.ID.card_info=e.CardInfo,this.data.cardhub.ID.card_id=e.CardID,this.data.cardhub.ID.data_info=e.Data,d.Block,t=""}if(this.data.cardhub.has_hf){e=a.getCardInfo(this.data.cardhub.HF.cardtype,this.data.cardhub.HF.info,null);var i=a.getCardData(this.data.cardhub.HF.cardtype,this.data.cardhub.HF.data_hex,this.data.cardhub.HF.data_orihex);this.data.cardhub.HF.data_text=i.str_data,this.data.cardhub.HF.data_analysis_text="",this.data.cardhub.HF.card_type=e.Type,this.data.cardhub.HF.card_info=e.CardInfo,this.data.cardhub.HF.card_id=e.CardID,this.data.cardhub.HF.data_info=e.Data,t="共 <span style='color: rgb(255, 0, 0);'>"+i.Block+"</span> 块数据"}this.data.cardhub.tip_text=t,this.setData({cardhub:this.data.cardhub}),this.updateScrollHeight()},onReady:function(){var a=n.getSystemInfo(),t=a.pageHeight-16;this.setData({data_work_height:t,"buttontouchmove.Height":t/2}),this.data.buttontouchmove.MinHeight=t/4,this.data.the1rpx=a.the1rpx,this.updateScrollHeight()},onShow:function(){(0,o.stringIsEmpty)(this.data.pre_execute)||(n.globalData.data.bluetooth.IsDeviceLink(this.data.BLE.deviceId)&&(console.log("预执行指令->",this.data.pre_execute),this.DoDeviceControl(this.data.pre_execute)),this.data.pre_execute=""),this.updateScrollHeight()},onHide:function(){},onUnload:function(){this.data._deviceutil.SetDecoding(n.globalData.data.devices.deviceId,!1)},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},DoDeviceControl:function(a,t){var e=this,d=new s.cardUtil,r=e.data.BLE.deviceId;if(n.globalData.data.bluetooth.IsDeviceLink(r)){if(!(0,o.stringIsEmpty)(a)){if(1===n.globalData.data.devices.in_blacklist)return void wx.showToast({title:"您的设备异常，请联系卖家",duration:5e3,icon:"none"});var c=e.data.cardhub.has_hf&&e.data.cardhub.HF.cardtype===d.card_type.MF?e.data.cardhub.HF.data_hex:[];switch(a){case"onekeydecode":e.data._deviceutil.CardDataDecodeAsync(r,e.data._deviceutil.decode_control.decode,c,null,g);break;case"readcard":e.data._deviceutil.CardDataDecodeAsync(r,e.data._deviceutil.decode_control.readonly,c,null,g);break;case"formatcard":this.data.FormatCardDialog.confirm?e.data._deviceutil.CardDataDecodeAsync(r,e.data._deviceutil.decode_control.format,c,null,g):(this.data.FormatCardDialog.confirm=!0,this.setData({"FormatCardDialog.show":!0}));break;case"decodebykey":if(this.data.inputKeyDecodeDialog.show){for(var h=[],l=0;l<this.data.inputKeyDecodeDialog.total;l++){var u=this.data.inputKeyDecodeDialog.value.slice(6*l,6*l+6);h=d.AddKey2Lib(h,u)}e.data._deviceutil.CardDataDecodeAsync(r,e.data._deviceutil.decode_control.decode,c,h,g),e.setData({"inputKeyDecodeDialog.show":!1})}else e.setData({"inputKeyDecodeDialog.show":!0,"inputKeyDecodeDialog.value":"","inputKeyDecodeDialog.total":0});break;case"decodebyfile":t&&t.length>0&&d.isRightMFTagData(t)?e.data._deviceutil.CardDataDecodeAsync(r,e.data._deviceutil.decode_control.decode,t,null,g):wx.navigateTo({url:"/pages/DataControl/DataImport?page=DataDecode"});break;case"setcarddata":this.data.SetCardDataDialog.enable=!1,e.DoDataControl(a,-1,[]);break;case"simulateTag":case"NFC_SimulateKey":case"detectionkeys":e.DoDataControl(a,-1,[])}}}else this.showMessage("设备未连接，请先连接设备",5e3,"warning"),setTimeout((function(){wx.switchTab({url:"/pages/device/index"})}),1e3);function g(a){var t="",d="",o=new s.cardUtil;switch(a.msg){case e.data._deviceutil.decode_message.start:e.initCardData(),e.setData({cardhub:e.data.cardhub,is_decoding:!0,decod_stoping:!1,"BLE.cardInfo":[],"BLE.Sectors":[]});break;case e.data._deviceutil.decode_message.test_reading_ID:t="正在读取ID卡...";break;case e.data._deviceutil.decode_message.test_readed_ID:var r=a.data.data,c=o.getIDCardInfo(r.data.type,r.data.freq,r.data.UID,r.data.size),h={no:e.data.BLE.cardInfo.length+1,card_type:c.Type,card_info:c.CardInfo};e.data.BLE.cardInfo.push(h),e.setData({"BLE.cardInfo":e.data.BLE.cardInfo}),t="读取到"+c.Type;break;case e.data._deviceutil.decode_message.test_reading_ULEV1:t="正在读取Ultralight/Ntag卡...";break;case e.data._deviceutil.decode_message.test_readed_ULEV1:var l=a.data.data;if(0===l.control){var u=new Array(2);u[0]=l.data.ATQA>>8&255,u[1]=255&l.data.ATQA;var g=new Array(1);g[0]=l.data.SAK;c=o.getULEV1Info(l.data.UID,l.data.size,u,g,l.verlength,l.version);var D={no:e.data.BLE.cardInfo.length+1,card_type:c.Type,card_info:c.CardInfo};e.data.BLE.cardInfo.push(D),e.setData({"BLE.cardInfo":e.data.BLE.cardInfo}),t="读取到Ultralight/Ntag卡"}else 1===l.control?t="读取Ultralight/Ntag卡数据（"+l.progress+"%)":3===l.control&&(t="读取Ultralight/Ntag卡数据（ "+l.progress+" byte)");break;case e.data._deviceutil.decode_message.test_reading_MF:t="正在读取IC卡...";break;case e.data._deviceutil.decode_message.test_readed_MF:var _=a.data.data;if(0===_.sector){var f=new Array(2);f[0]=_.mf.ATQA>>8&255,f[1]=255&_.mf.ATQA;var b=new Array(1);b[0]=_.mf.SAK;c=o.getMFInfo(_.mf.UID,_.mf.size,f,b);var v={no:e.data.BLE.cardInfo.length+1,card_type:c.Type,card_info:c.CardInfo};e.data.BLE.cardInfo.push(v),e.setData({"BLE.cardInfo":e.data.BLE.cardInfo})}var p={sector:_.sector,working:!1,workingA:!1,workingB:!1,data:e.data._deviceutil.decode_read_color.no_control,keyA:e.data._deviceutil.decode_key_color.no_control,KeyB:e.data._deviceutil.decode_key_color.no_control};e.data.BLE.Sectors.push(p),e.setData({"BLE.Sectors":e.data.BLE.Sectors}),t="正在获取扇区...";break;case e.data._deviceutil.decode_message.test_mf_key:t="";var m=a.data.data;m.sector>=0&&m.sector<e.data.BLE.Sectors.length&&(0===m.type?e.data.BLE.Sectors[m.sector].keyA=m.control:e.data.BLE.Sectors[m.sector].KeyB=m.control,m.control===e.data._deviceutil.decode_key_color.get&&(0===m.type?e.data.BLE.Sectors[m.sector].workingA=!1:e.data.BLE.Sectors[m.sector].workingB=!1),t="正在验证扇区"+m.sector+" "+(0===m.type?"KeyA":"KeyB")+"...",e.setData({"BLE.Sectors":e.data.BLE.Sectors}));break;case e.data._deviceutil.decode_message.test_mf_read:case e.data._deviceutil.decode_message.test_mf_format:var y=a.data.data;if(y.sector>=0&&y.sector<e.data.BLE.Sectors.length){var w="扇区"+y.sector+"数据...";e.data.BLE.Sectors[y.sector].data=y.control,e.setData({"BLE.Sectors":e.data.BLE.Sectors}),t=a.msg===e.data._deviceutil.decode_message.test_mf_read?"正在读取":"正在格式化",t+=w,y.gen>0&&(d=a.msg===e.data._deviceutil.decode_message.test_mf_read?2==y.gen?"该卡为FUID兼容卡":"该卡为魔术卡（UID）":2==y.gen?"该卡为FUID兼容卡,格式化后可自动解锁，恢复重复擦写":"该卡为魔术卡（UID）")}break;case e.data._deviceutil.decode_message.test_temp_keylist:var x=a.data;console.log("发现有未完成的解码记录，是否继续完成？"),"function"==typeof x&&(e.data.waitforCheckGoOnDialog.callback=x,e.data.waitforCheckGoOnDialog.time=6,e.data.waitforCheckGoOnDialog.ID=setInterval((function(){e.data.waitforCheckGoOnDialog.time--,e.data.waitforCheckGoOnDialog.time<=0?e.CheckGoOn(!0):e.setData({"waitforCheckGoOnDialog.time":e.data.waitforCheckGoOnDialog.time})}),1e3),e.setData({"waitforCheckGoOnDialog.time":e.data.waitforCheckGoOnDialog.time,"waitforCheckGoOnDialog.show":!0}));break;case e.data._deviceutil.decode_message.test_mf_darkside:var C=a.data.data;t="正在解码全加密卡，扇区"+C.sector+" "+(0===C.type?"KeyA":"KeyB")+"...",1===C.data.state?d="( "+C.data.trycount+" )获取数据...":2===C.data.state?d="( "+C.data.trycount+" )"+(238===C.data.per?"运算数据失败":"运算数据..."):238===C.data.state&&(d="( "+C.data.trycount+" )获取数据失败("+C.data.per+")");break;case e.data._deviceutil.decode_message.test_mf_nested:var I=a.data.data;t="正在解码扇区"+I.sector+" "+(0===I.type?"KeyA":"KeyB")+"...",1===I.data.state?d="( "+I.data.trycount+" )获取数据...":2===I.data.state?d="( "+I.data.trycount+" )"+(238===I.data.per?"运算数据失败":"运算数据..."):238===I.data.state&&(d="( "+I.data.trycount+" )获取数据失败("+I.data.per+")");break;case e.data._deviceutil.decode_message.test_mf_static_nonce:case e.data._deviceutil.decode_message.test_mf_thrid_nonce:var S=a.data.data;if(t=a.msg===e.data._deviceutil.decode_message.test_mf_thrid_nonce?"正在解码三代无漏洞卡，扇区"+S.sector+" "+(0===S.type?"KeyA":"KeyB")+"...":"正在解码二代无漏洞卡+，扇区"+S.sector+" "+(0===S.type?"KeyA":"KeyB")+"...",1===S.data.state)d="获取密钥数据...";else if(2===S.data.state){var F="",T="";if(S.data.loadcount<S.data.total)F="已获取("+(S.data.loadcount+"/"+S.data.total)+")，",T=S.data.scan;else F="",T=S.data.scan+"/"+S.data.total;d=F+"已扫描("+T+")。耗时较长，请耐心等待"}else 255===S.data.state&&(d="退出解码");break;case e.data._deviceutil.decode_message.test_mf_C50:var H=a.data.data;t="正在解码增强型无漏洞卡，扇区"+H.sector+" "+(0===H.type?"KeyA":"KeyB")+"...",d=0===H.data.state?"准备获取数据":1===H.data.state?"( "+H.data.trycount+" )获取"+H.data.per+"组数据":2===H.data.state?"( "+H.data.trycount+" )启动增强型解码":3===H.data.state?"( "+H.data.trycount+" )已提交 "+H.data.per+" 次":4===H.data.state?"( "+H.data.trycount+" )正在运算，耗时较长，请耐心等待 "+H.data.per:"退出增强型解码";break;case e.data._deviceutil.decode_message.test_mf_decoding:t="";for(var E=a.data.data,k=0;k<e.data.BLE.Sectors.length;k++)e.data.BLE.Sectors[k].working=E.sector===k,e.data.BLE.Sectors[k].workingA=!1,e.data.BLE.Sectors[k].workingB=!1,E.sector===k&&(0===E.type?e.data.BLE.Sectors[k].workingA=!0:e.data.BLE.Sectors[k].workingB=!0,t="正在解码扇区"+E.sector+" "+(0===E.type?"KeyA":"KeyB")+"...",e.data.BLE.Sectors[E.sector].data=E.control);e.setData({"BLE.Sectors":e.data.BLE.Sectors});break;case e.data._deviceutil.decode_message.test_set_data:t=a.data.data.progress<100?"正在下发数据 "+a.data.data.progress+"%":"下发数据成功";break;case e.data._deviceutil.decode_message.end:var M=a.data;if(e.setData({is_decoding:!1,decod_stoping:!1}),t="操作结束",e.updateReadCardData(M.data.data),M.ans===e.data._deviceutil.decode_message.cancel)t="操作已取消",(0,i.default)({context:e,selector:"#t-toast",message:t});else if(M.ans===e.data._deviceutil.decode_message.card_uid_change)t="卡片变更，请不要在解码时更换卡片！",e.showMessage(t,5e3,"warning");else if(M.ans===e.data._deviceutil.decode_message.card_read_err)t="读卡失败，请重新尝试！",e.showMessage(t,5e3,"warning");else if(M.ans===e.data._deviceutil.decode_message.no_card_read)t="请放置卡片于设备感应区",(0,i.default)({context:e,selector:"#t-toast",message:"未读取到卡片"});else if(M.ans===e.data._deviceutil.decode_message.decode_success){t="解码成功，请换上复制卡写卡",e.showMessage(t,3e3,"success"),n.loadConfigInfo().autoShowSetCardData&&(e.data.SetCardDataDialog.enable=!0,e.DoDataControl("setcarddata",-1,M.data.data.HF.has?M.data.data.HF.data.card_hash:[]))}else if(M.ans===e.data._deviceutil.decode_message.decode_no_has_all_keys)t="数据未全部解码",e.showMessage(t,5e3,"warning"),e.setData({showWriteCardDialog:!0});else if(M.ans===e.data._deviceutil.decode_message.readonly_success)t="读卡成功，可按写卡键写卡",e.showMessage(t,3e3,"success");else if(M.ans===e.data._deviceutil.decode_message.decode_no_has_keys)t="全加密无漏洞卡，请先密流侦测",e.showMessage(t,5e3,"warning"),e.setData({showDetectDialogMsg:"该卡为全加密无漏洞卡",showDetectDialog:!0});else if(M.ans===e.data._deviceutil.decode_message.no_read_all_data)t="数据未全部读取",e.showMessage(t,5e3,"warning"),e.setData({showOnekeyDecodeDialog:!0});else if(M.ans===e.data._deviceutil.decode_message.format_no_mf)t="非IC卡，暂不支持格式化",e.showMessage(t,5e3,"warning");else if(M.ans===e.data._deviceutil.decode_message.format_success)t="格式化完成，可查看格式化后数据",e.showMessage(t,5e3,"success");else if(M.ans===e.data._deviceutil.decode_message.set_data_err){console.log("解码成功，数据下发失败，可按写卡重新写卡"),t="解码成功，请换上复制卡写卡",e.showMessage(t,5e3,"success"),n.loadConfigInfo().autoShowSetCardData&&(e.data.SetCardDataDialog.enable=!0,e.DoDataControl("setcarddata",-1,M.data.data.HF.has?M.data.data.HF.data.card_hash:[]))}else M.ans===e.data._deviceutil.decode_message.is_thirdTag?(t="未知无漏洞卡，如果无法解码请尝试密流侦测",e.showMessage(t,1e4,"warning"),e.setData({showDetectDialogMsg:"未知无漏洞卡，如果无法解码请尝试密流侦测",showDetectDialog:!0})):M.ans===e.data._deviceutil.decode_message.other_hf_tag?(t="非Mifare1卡，请确保卡片为Mifare1卡！",e.showMessage(t,5e3,"warning")):(t="操作完成",(0,i.default)({context:e,selector:"#t-toast",message:t}));e.data.QuitDecode.wait&&(e.data.QuitDecode.wait=!1,wx.navigateBack());break;case e.data._deviceutil.decode_message.cancel:t="取消操作"}e.data.BLE.message!=t&&e.setData({"BLE.message":t}),e.data.BLE.message_more!=d&&e.setData({"BLE.message_more":d})}},doDecodeByFile:function(a,t){var e=new s.cardUtil;e.card_type.MF===a&&t&&t.length>0&&e.isRightMFTagData(t)?this.DoDeviceControl("decodebyfile",t):this.showMessage("不是有效IC/NTAG数据，请重新选择数据",5e3,"warning")},selectOneData:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,e=arguments.length>2?arguments[2]:void 0;if(this.data.cardhub.has_id&&this.data.cardhub.has_hf&&t<=0)return this.setData({"select.control":a,"select.data_hash":e,visible_cardSelect:!0}),1;if(t<=0)this.data.select.data_hash=e,this.data.cardhub.has_id?(this.data.select.id=this.data.cardhub.ID.cardtype,this.data.select.data_hex=this.data.cardhub.ID.data_hex,this.data.select.data_info=this.data.cardhub.ID.data_info):(this.data.select.id=this.data.cardhub.HF.cardtype,this.data.select.data_hex=this.data.cardhub.HF.data_hex,this.data.select.data_info=this.data.cardhub.HF.data_info);else{this.data.select.id=t,this.data.select.data_hash=e;var d=new s.cardUtil;t===d.card_type.id?(this.data.select.data_hex=this.data.cardhub.ID.data_hex,this.data.select.data_info=this.data.cardhub.ID.data_info):(this.data.select.data_hex=this.data.cardhub.HF.data_hex,this.data.select.data_info=this.data.cardhub.HF.data_info)}return 0},DoDataControl:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,e=arguments.length>2?arguments[2]:void 0,d=new s.cardUtil;if(1!==n.globalData.data.devices.in_blacklist)if("data_import"===a)wx.navigateTo({url:"/pages/DataControl/DataImport?page=DataControl"});else if("set_newcard"===a)this.setData({visible_setNewCard:!0});else if("detectionkeys"===a)this.DoDetection(1);else if("simulateTag"===a)this.simulateTag();else if(this.data.cardhub.has_id||this.data.cardhub.has_hf&&this.data.cardhub.HF.data_hex.length>0||"setcarddata"===a&&this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype===d.card_type.Other)switch(a){case"setcarddata":if(1===this.selectOneData(a,t,e))return;this.writeTag();break;case"NFC_SimulateKey":this.NFCSimulateKey();break;case"data_export":if(1===this.selectOneData(a,t,e))return;this.setData({visible_cardExport:!0});break;case"onekey_analysis":this.submitAnalysis();break;case"data_comp":this.dataComp();break;case"data_modify":this.dataModify();break;case"onekey_encrypt":this.onekeyEncrypt();break;case"make_cardhub":if(1===this.selectOneData(a,t,e))return;this.setData({showEditDialog:!0,cardhubName:"",cardhubAddress:"",cardHubNameError:"",cardHubAddressError:""})}else this.setData({"GetDataDialog.show":!0}),this.showMessage("无数据，请先获取数据",5e3,"warning");else wx.showToast({title:"您的设备异常，请联系卖家",duration:5e3,icon:"none"})},updateReadCardData:function(a){var t=new s.cardUtil,e=new r.fileUtil;if(this.initCardData(),a.ID.has){this.data.cardhub.has_id=!0,this.data.cardhub.ID.cardtype=a.ID.type,this.data.cardhub.ID.data_hex=a.ID.data.data,this.data.cardhub.ID.data_orihex=a.ID.data;for(var d="",i=0;i<57;i++)d+=("00"+a.ID.data.data[i].toString(16)).slice(-2).toUpperCase();this.data.cardhub.ID.info=d;var o=t.getIDCardInfo(a.ID.data.type,a.ID.data.freq,a.ID.data.UID,a.ID.data.size);this.data.cardhub.ID.data_text="",this.data.cardhub.ID.card_type=o.Type,this.data.cardhub.ID.card_info=o.CardInfo,this.data.cardhub.ID.card_id=o.CardID,this.data.cardhub.ID.data_info=o.Data,this.data.cardhub.tip_text=""}else this.data.cardhub.has_id=!1,this.data.cardhub.ID.data_hex=[],this.data.cardhub.ID.data_orihex=[],this.data.cardhub.ID.info="",this.data.cardhub.ID.data_text="",this.data.cardhub.ID.card_type="",this.data.cardhub.ID.card_info="",this.data.cardhub.ID.card_id="",this.data.cardhub.tip_text="";if(a.HF.has){this.data.cardhub.has_hf=!0;var c="",n=new Array(2);n[0]=a.HF.data.ATQA>>8&255,n[1]=255&a.HF.data.ATQA;var h=new Array(1);h[0]=a.HF.data.SAK;var l=a.HF.data.card_data;if(a.HF.type===t.card_type.ULEV1){this.data.cardhub.HF.cardtype=t.card_type.ULEV1;var u=new Array(74);u.fill(0);for(var g=a.HF.data.UID.slice(a.HF.data.UID.length-4),D=0;D<4;D++)u[D]=g[D];u[4]=n[0],u[5]=n[1],u[6]=h[0];for(var _=0;_<a.HF.data.size;_++)u[7+_]=a.HF.data.UID[_];u[18]=a.HF.data.size,u[19]=a.HF.data.data.verlength;var f=u[19];f=f>16?16:f;for(var b=0;b<f;b++)u[20+b]=a.HF.data.data.version[b];var v=a.HF.data.data.signature.length;v=v>32?32:v;for(var p=0;p<v;p++)u[36+p]=a.HF.data.data.signature[p];var m=a.HF.data.data.num_blocks;u[68]=m-2&255,u[69]=m-2>>8&255,u[70]=255&m,u[71]=m>>8&255,l&&l.length>0&&(l=u.concat(l));for(var y=0;y<36;y++)c+=("00"+u[y].toString(16)).slice(-2).toUpperCase();var w=t.getULEV1Info(a.HF.data.UID,a.HF.data.size,n,h,a.HF.data.data.verlength,a.HF.data.data.version);this.data.cardhub.HF.card_type=w.Type,this.data.cardhub.HF.card_info=w.CardInfo,this.data.cardhub.HF.card_id=w.CardID,this.data.cardhub.HF.data_info=w.Data}else{this.data.cardhub.HF.cardtype=a.HF.type;var x=new Array(16);x.fill(0);for(var C=0;C<a.HF.data.size;C++)x[C]=a.HF.data.UID[C];4===a.HF.data.size?(x[4]=x[0]^x[1]^x[2]^x[3],x[5]=h[0],x[6]=n[0],x[7]=n[1]):(x[a.HF.data.size]=h[0],x[a.HF.data.size+1]=n[0],x[a.HF.data.size+2]=n[1]);for(var I=0;I<16;I++)c+=("00"+x[I].toString(16)).slice(-2).toUpperCase();w=t.getMFInfo(a.HF.data.UID,a.HF.data.size,n,h);this.data.cardhub.HF.card_type=w.Type,this.data.cardhub.HF.card_info=w.CardInfo,this.data.cardhub.HF.card_id=w.CardID,this.data.cardhub.HF.data_info=w.Data}this.data.cardhub.HF.info=c;var S="";if(l&&l.length>0){this.data.cardhub.HF.data_hex=l,this.data.cardhub.HF.data_orihex=l;var F=t.getReadCardData(this.data.cardhub.HF.cardtype,this.data.cardhub.HF.data_hex,a.HF);this.data.cardhub.HF.data_text=F.str_data,S="共 <span style='color: rgb(255, 0, 0);'>"+F.Total+"</span> 块数据，成功获取 <span style='color: rgb(255, 0, 0);'>"+F.Success+"</span> 块数据",F.Total>0&&F.Total===F.Success&&(e.writeCardTempFile(a.HF.data.UID,a.HF.data.size,a.HF.type,l),a.HF.type===t.card_type.MF&&e.removeCardTempFile(a.HF.data.UID,a.HF.data.size,0))}else{this.data.cardhub.HF.data_hex=[],this.data.cardhub.HF.data_orihex=[];var T=t.getReadCardKeys(this.data.cardhub.HF.cardtype,a.HF);this.data.cardhub.HF.data_text=T.str_data,S="共 <span style='color: rgb(255, 0, 0);'>"+T.Total+"</span> 组密钥，成功获取 <span style='color: rgb(255, 0, 0);'>"+T.Success+"</span> 组密钥"}this.data.cardhub.tip_text=S,this.data.cardhub.HF.data_analysis_text=""}else this.data.cardhub.has_hf=!1,this.data.cardhub.HF.data_hex=[],this.data.cardhub.HF.data_orihex=[],this.data.cardhub.HF.info="",this.data.cardhub.HF.data_text="",this.data.cardhub.HF.card_type="",this.data.cardhub.HF.card_info="",this.data.cardhub.HF.card_id="",this.data.cardhub.HF.data_analysis_text="";this.setData({cardhub:this.data.cardhub}),this.updateScrollHeight()},updateScrollHeight:function(){var a=this,t=!1;if(a.data.cardhub.has_id&&a.data.cardhub.has_hf&&(t=!0),a.setData({"cardhub.ID.no":t?"卡1":0,"cardhub.ID.collapse.show":!!t,"cardhub.ID.collapse.expand":!t,"cardhub.HF.no":t?"卡2":0}),!a.data.is_decoding){var e=wx.createSelectorQuery();e.select("#button-block").boundingClientRect(),e.exec((function(t){if(t&&t[0]&&t[0].height>0){var e=a.data.data_work_height/2,d=a.data.the1rpx,i=t[0].height+58*d;a.data.buttontouchmove.MaxHeight=i>a.data.data_work_height/4*3?a.data.data_work_height/4*3:i,e>a.data.buttontouchmove.MaxHeight&&(e=a.data.buttontouchmove.MaxHeight),e<a.data.buttontouchmove.MinHeight&&(a.data.buttontouchmove.MinHeight=e),a.data.buttontouchmove.Height<=0?a.setData({"buttontouchmove.Height":e}):e=a.data.buttontouchmove.Height,a.setData({"buttontouchmove.arrow":e>=a.data.buttontouchmove.MaxHeight?"chevron-down-double-s":"unfold-more"})}}))}},onDataCollapse:function(){var a=this.data.cardhub.ID.collapse.expand;this.setData({"cardhub.ID.collapse.expand":!a})},touchstart:function(a){var t=this,e=t.data.the1rpx,d=wx.createSelectorQuery();d.select("#button-block").boundingClientRect(),d.exec((function(a){t.data.buttontouchmove.listHeight=a[0].height+52*e})),t.data.buttontouchmove.flag=0,t.data.buttontouchmove.lastX=a.changedTouches[0].pageX,t.data.buttontouchmove.lastY=a.changedTouches[0].pageY},touchEvent:function(a){var t=this.data.buttontouchmove.Height,e=this.data.buttontouchmove.MinHeight,d=this.data.buttontouchmove.MaxHeight,i=this.data.buttontouchmove.lastX,s=this.data.buttontouchmove.lastY,o=a.changedTouches[0].pageX,r=a.changedTouches[0].pageY,c=o-i,n=r-s;Math.abs(c)-Math.abs(n)>5?c<0?this.data.buttontouchmove.flag=1:c>0&&(this.data.buttontouchmove.flag=2):n<0?(t<d&&(t=(t-=n)>d?d:t),this.data.buttontouchmove.flag=3,"up"!=this.data.buttontouchmove.touch&&this.setData({"buttontouchmove.touch":"up","buttontouchmove.arrow":"chevron-up-double-s"})):n>0&&(t>e&&(t=(t-=n)<e?e:t),this.data.buttontouchmove.flag=4,"down"!=this.data.buttontouchmove.touch&&this.setData({"buttontouchmove.touch":"down","buttontouchmove.arrow":"chevron-down-double-s"})),this.data.buttontouchmove.lastX=o,this.data.buttontouchmove.lastY=r,this.setData({"buttontouchmove.Height":t})},touchEnd:function(a){var t=this.data.buttontouchmove.Height,e=this.data.buttontouchmove.MinHeight,d=this.data.buttontouchmove.MaxHeight;this.data.buttontouchmove.flag=0,t>e&&t<d?this.setData({"buttontouchmove.touch":"","buttontouchmove.arrow":"unfold-more"}):(t>=d&&this.setData({"buttontouchmove.touch":"top","buttontouchmove.arrow":"chevron-down-double-s"}),t<=e&&this.setData({"buttontouchmove.touch":"bottom","buttontouchmove.arrow":"chevron-up-double-s"}))},onStopControl:function(a){this.doStopControl()},doStopControl:function(){this.data.is_decoding?(this.data._deviceutil.SetDecoding(n.globalData.data.devices.deviceId,!1),this.setData({decod_stoping:!0})):this.setData({is_decoding:!1})},onDeviceControl:function(a){var t=a.currentTarget.dataset.id;this.DoDeviceControl(t)},onDataControl:function(a){var t=a.currentTarget.dataset.id;this.DoDataControl(t,-1,[])},writeTag:function(){var a=new s.cardUtil,t="",e="";if(this.data.select.id===a.card_type.id){var d=this.data.select.data_info.freq,i=this.data.select.data_info.type;if("NSC"===i)return void wx.showModal({title:"写卡",content:"设备不支持NSC卡写卡。",confirmText:"确定",showCancel:!1});if("ID"===i){if(t=d+" "+i+"复制卡","125KHz"!=d){if(!this.data._deviceutil.SupportWriteOffsetFreqIDTag(this.data.BLE.TEID))return void wx.showModal({title:"写卡",content:"当前设备不支持ID偏频卡写卡，请更换更高版本设备。",confirmText:"确定",showCancel:!1});e="识别为偏频卡，为避免频率误判，建议将卡拿高1厘米距离再次读卡确认。"}e+="推荐使用K8678复制卡"}else if(-1!=i.indexOf("HID"))t="T5577复制卡",e="";else{if((-1!=i.indexOf("SID")||-1!=i.indexOf("GID"))&&!this.data._deviceutil.SupportWriteSIDGID(this.data.BLE.TEID))return void wx.showModal({title:"写卡",content:"当前设备不支持SID/GID特殊卡写卡，请更换更高版本设备。",confirmText:"确定",showCancel:!1});t=d+" "+i+"复制卡",e=""}}else if(this.data.select.id===a.card_type.ULEV1){if(!this.data._deviceutil.SupportWriteULEV1(this.data.BLE.TEID))return void wx.showModal({title:"写卡",content:"当前设备不支持Ntag/Ultralight卡写卡，请更换更高版本设备。",confirmText:"确定",showCancel:!1});var o=this.data.select.data_hex[19];o=o>16?16:o;var r=this.data.select.data_hex.slice(20,20+o),c=a.get_ulev1_version(o,r);t=a.get_ulev1_copytag(c)+"复制卡",e=""}else if(this.data.select.id===a.card_type.MF)if(e="写卡前建议先进行数据分析/对比，判断是否为滚动码系统。直接写卡有可能造成原卡失效！！！（滚动码系统判断方法请查看教程）",t="IC复制卡",7===this.data.select.data_info.size){if(!this.data._deviceutil.SupportWrite7BTag(this.data.BLE.TEID))return void wx.showModal({title:"写卡",content:"当前设备不支持7B特殊卡写卡，请更换更高版本设备。",confirmText:"确定",showCancel:!1});t=1024===this.data.select.data_hex.length?"M1-7B复制卡":"7B复制卡"}else if(this.data.select.data_hex.length>1024)if(4096===this.data.select.data_hex.length){if(!this.data._deviceutil.SupportWrite4KTag(this.data.BLE.TEID))return void wx.showModal({title:"写卡",content:"当前设备不支持4K特殊卡写卡，请更换更高版本设备。",confirmText:"确定",showCancel:!1});t="M1-4K复制卡"}else e+="尝试使用M1/M1-4K复制卡复制。如非滚动码系统，推荐使用CUID、FUID、HUID等穿防火墙复制卡进行复制。";else e+="如非滚动码系统，推荐使用CUID、FUID、HUID等穿防火墙复制卡进行复制。";else e="不支持卡，仅尝试写入卡号到IC复制卡",t="IC复制卡";this.setData({"SetCardDataDialog.show":!0,"SetCardDataDialog.enable":this.data.SetCardDataDialog.enable,"SetCardDataDialog.name":t,"SetCardDataDialog.tip":e,"SetCardDataDialog.writing":!1})},simulateTag:function(){var a=new s.cardUtil;if(this.data._deviceutil.SupportSimulateTag(this.data.BLE.TEID)){for(var t=!(this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype===a.card_type.MF&&this.data.cardhub.HF.data_hex.length>0),e=0;e<this.data.SimulateTagDialog.list.length;e++)this.data.SimulateTagDialog.list[e].loading=!1,"readTag"!==this.data.SimulateTagDialog.list[e].id?this.data.SimulateTagDialog.list[e].disabled=t:this.data.SimulateTagDialog.list[e].disabled=!1;this.data.SimulateTagDialog.show=!0,this.setData({SimulateTagDialog:this.data.SimulateTagDialog})}else wx.showModal({title:"卡片模拟",content:"当前设备不支持卡片模拟，请更换更高版本设备。",confirmText:"确定",showCancel:!1})},NFCSimulateKey:function(){var a=new s.cardUtil;if(this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype==a.card_type.MF){var t="/pages/DataControl/NFCSimulateKey",e={cardtype:this.data.cardhub.HF.cardtype,data:this.data.cardhub.HF.data_hex,datainfo:this.data.cardhub.HF.data_info,strType:this.data.cardhub.HF.card_type},d=JSON.stringify(e);t=t+"?data="+encodeURIComponent(d),wx.navigateTo({url:t})}else this.showMessage("不是有效IC数据，请先获取数据",5e3,"warning")},submitAnalysis:function(){var a=this,t=new s.cardUtil;if(this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype==t.card_type.MF){var e={cardtype:this.data.cardhub.HF.cardtype,data:this.data.cardhub.HF.data_hex};(0,o.request)("POST","CopyKEY/CardDataAnalysis",e,(function(t){if(null!=t){var e=t;if(e.success&&0===e.code&&e.data){var d=JSON.parse(e.data);if(d.length>0){for(var s="",r="<div class='analysis-data-text-info'>",c=0;c<d.length;c++){var n=d[c];r+="<h4 style='color: #B00D00;'>"+n.rawname+"</h4><br/>",s+=n.rawname+"\r\n";for(var h=n.value,l=0;l<h.length;l++){var u=h[l];u.a.includes("广告")?(u.a.length>0&&!u.a.includes("广告")&&(r+=u.a+"<br/>",s+=u.a+"\r\n"),u.b.length>0&&!u.b.includes("广告")&&(r+=u.b+"<br/>",s+=u.b+"\r\n"),u.c.length>0&&!u.c.includes("广告")&&(r+=u.c+"<br/>",s+=u.c+"\r\n"),u.d.length>0&&!u.d.includes("广告")&&(r+=u.d+"<br/>",s+=u.d+"\r\n")):(u.a.length>0&&(r+="数据项目："+u.a+"<br/>",s+="数据项目："+u.a+"\r\n"),u.b.length>0&&(r+="位置信息："+u.b+"<br/>",s+="位置信息："+u.b+"\r\n"),u.c.length>0&&(r+="数据代码："+u.c+"<br/>",s+="数据代码："+u.c+"\r\n"),u.d.length>0&&(r+="其他说明："+u.d+"<br/>",s+="其他说明："+u.d+"\r\n")),r+="<br/>"}r+="<br/>"}r+="</div>",a.setData({"cardhub.HF.data_analysis_text":r}),a.setData({"DataAnalysisDialog.show":!0,"DataAnalysisDialog.content":s}),(0,i.default)({context:a,selector:"#t-toast",message:"数据分析成功"})}else{(0,i.default)({context:a,selector:"#t-toast",message:"该数据目前无法分析，可能有以下三种原因:1.该卡只识别卡号或者是联网系统。2.该卡是未收录的新型系统。3.该卡数据可能在CPU部分。"});a.setData({"cardhub.HF.data_analysis_text":"<div class='analysis-data-text-error'>该数据目前无法分析，可能有以下三种原因:<br/>1.该卡只识别卡号或者是联网系统。<br/>2.该卡是未收录的新型系统。<br/>3.该卡数据可能在CPU部分。<br/></div>"})}}else{var g=((0,o.stringIsEmpty)(e.errmsg),(0,o.errorMsg)(e.code,"zh-cn"));(0,i.default)({context:a,selector:"#t-toast",message:g}),a.setData({"cardhub.HF.data_analysis_text":g})}a.setData({scrollToView:"data_info"})}}),(function(t){(0,i.default)({context:a,selector:"#t-toast",message:"制作卡包失败"})}),(function(a){})),n.showLoadingToast(this,"#t-toast")}else this.showMessage("不是有效IC数据，请先获取数据",5e3,"warning")},dataComp:function(){if(this.data.cardhub.has_hf&&this.data.cardhub.HF.data_hex.length>0){var a={cardtype:this.data.cardhub.HF.cardtype,data:this.data.cardhub.HF.data_hex},t=JSON.stringify(a);wx.navigateTo({url:"/pages/DataControl/DataComp?data="+encodeURIComponent(t)})}else wx.navigateTo({url:"/pages/DataControl/DataComp"})},dataModify:function(){if(!this.data.cardhub.has_hf&&this.data.cardhub.HF.data_hex.length>0)this.showMessage("不是有效IC/NTAG数据，请先获取数据",5e3,"warning");else{var a={cardtype:this.data.cardhub.HF.cardtype,data:this.data.cardhub.HF.data_hex},t=JSON.stringify(a);wx.navigateTo({url:"/pages/DataControl/DataModify?type=1&data="+encodeURIComponent(t)})}},onekeyEncrypt:function(){var a=new s.cardUtil;this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype==a.card_type.MF?this.setData({showEncryptDialog:!0}):this.showMessage("不是有效IC数据，请先获取数据",5e3,"warning")},DoOnekeyEncrypt:function(){var a=(new s.cardUtil).MFTagDataEncrypt(this.data.cardhub.HF.data_hex);this.data.cardhub.HF.data_hex=a,this.updateCardData(),this.closeEncryptDialog()},closeEncryptDialog:function(){this.setData({showEncryptDialog:!1})},DoFormatCardDialog:function(){this.DoDeviceControl("formatcard"),this.closeFormatCardDialog()},closeFormatCardDialog:function(){this.data.FormatCardDialog.confirm=!1,this.setData({"FormatCardDialog.show":!1})},submitData:function(a){if(this.data.select.id<=0)console.log("参数错误");else if(this.data.cardhubName=a.detail.cardhubName,this.data.cardhubAddress=a.detail.cardhubAddress,(0,o.stringIsEmpty)(this.data.cardhubName))this.setData({cardHubNameError:"请输入卡包名称"});else if((0,o.stringIsEmpty)(this.data.cardhubAddress))this.setData({cardHubAddressError:"请输入详细地址"});else{var t=this,e=wx.getStorageSync("userInfo");if(e){var d={wechat_id:e.wechat_id,user_account:e.user_account,type:"1",md5:"",name:this.data.cardhubName,address:this.data.cardhubAddress,cardtype:this.data.select.id,data:this.data.select.data_hex};(0,o.request)("POST","CopyKEY/SetCardHubItem",d,(function(a){if(null!=a){var e=a;if(e.success&&0===e.code)n.addCardDataHub(),(0,i.default)({context:t,selector:"#t-toast",message:"制作卡包成功"}),t.closeEditDialog();else{var d=(0,o.stringIsEmpty)(e.errmsg)?(0,o.errorMsg)(e.code,"zh-cn"):e.errmsg;(0,i.default)({context:t,selector:"#t-toast",message:"制作卡包失败:"+d})}}}),(function(a){(0,i.default)({context:t,selector:"#t-toast",message:"制作卡包失败"})}),(function(a){})),n.showLoadingToast(this,"#t-toast")}else this.showMessage("未登录，请先登录",5e3,"info"),setTimeout((function(){wx.navigateTo({url:"/pages/Login/wxLogin"})}),1e3)}},closeEditDialog:function(){this.setData({showEditDialog:!1})},closeExportDialog:function(){this.setData({showExportDialog:!1})},closeSetCardDataDialog:function(){this.data.SetCardDataDialog.writing?(this.setData({"SetCardDataDialog.stoping":!0}),this.data._deviceutil.SetDecoding(n.globalData.data.devices.deviceId,!1)):this.setData({"SetCardDataDialog.show":!1,"SetCardDataDialog.writing":!1,"SetCardDataDialog.stoping":!1})},closeSimulateTagDialog:function(){if(this.data.SimulateTagDialog.simulate)this.setData({"SimulateTagDialog.stoping":!0}),this.data._deviceutil.SetDecoding(n.globalData.data.devices.deviceId,!1);else{this.data.SimulateTagDialog.show=!1,this.data.SimulateTagDialog.simulate=!1,this.data.SimulateTagDialog.stoping=!1;for(var a=0;a<this.data.SimulateTagDialog.list.length;a++)this.data.SimulateTagDialog.list[a].loading=!1;this.setData({SimulateTagDialog:this.data.SimulateTagDialog})}},closeOnekeyDecodeDialog:function(){this.setData({showOnekeyDecodeDialog:!1})},DoOnekeyDecodeDialog:function(){this.DoDeviceControl("onekeydecode"),this.closeOnekeyDecodeDialog()},closeWriteCardDialog:function(){this.setData({showWriteCardDialog:!1})},DoWriteCardDialog:function(){this.data.SetCardDataDialog.enable=!1,this.DoDataControl("setcarddata",-1,[]),this.closeWriteCardDialog()},closeDoDetectDialog:function(){this.setData({showDetectDialog:!1})},GetDataDialogAction:function(a){var t=a.detail.index;1===t?this.DoDataControl("data_import",-1,[]):2===t&&this.DoDeviceControl("onekeydecode"),this.setData({"GetDataDialog.show":!1})},CopyDataAnalysisCloseDialog:function(a){(0,o.stringIsEmpty)(this.data.DataAnalysisDialog.content)||wx.setClipboardData({data:this.data.DataAnalysisDialog.content,success:function(a){}}),this.setData({"DataAnalysisDialog.show":!1})},DoDetectDialog:function(){this.DoDetection(1),this.closeDoDetectDialog()},onDetectionKey:function(a){this.DoDetection(1)},DoDetection:function(a){if(this.data._deviceutil.SupportDetectionTag(this.data.BLE.TEID)){var t=new s.cardUtil,e="/pages/DataControl/Detection";if(1===a&&this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype===t.card_type.MF){var d={cardtype:this.data.cardhub.HF.cardtype,data:this.data.cardhub.HF.data_hex,datainfo:this.data.cardhub.HF.data_info,strType:this.data.cardhub.HF.card_type},i=JSON.stringify(d);e=e+"?data="+encodeURIComponent(i)}wx.navigateTo({url:e})}else wx.showModal({title:"密流侦测",content:"当前设备不支持密流侦测，请更换更高版本设备。",confirmText:"确定",showCancel:!1})},DoDecodeByKey:function(a){this.data.inputKeyDecodeDialog.value=a.detail.keyValue,this.data.inputKeyDecodeDialog.total=a.detail.Total,this.DoDeviceControl("decodebykey")},SetCardDataAndBack:function(a){this.DoSetCardDataAsync()},DoSetCardDataAsync:function(){var a=this;return d(e().mark((function t(){var d,o,r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(a){var t="",e=new s.cardUtil;switch(a.msg){case d.data._deviceutil.decode_message.start:t="开始写卡...",d.setData({"SetCardDataDialog.stoping":!1});break;case d.data._deviceutil.decode_message.end:var o=a.data,r=e.getWriteCardData(d.data.select.id,d.data.select.data_hex,o.data),c="";o.ans===d.data._deviceutil.decode_message.cancel?(c=t="操作已取消",(0,i.default)({context:d,selector:"#t-toast",message:t})):o.ans===d.data._deviceutil.decode_message.writecard_success?(t=d.data.select.id===e.card_type.Other?"卡号写卡成功":r.Total===r.Success?"写卡成功":"写卡成功！共"+r.Total+"块数据，成功写入"+r.Success+"块",c=d.data.select.id!=e.card_type.id?d.data.select.id===e.card_type.Other?"卡号写卡成功":"共 <span style='color: rgb(255, 0, 0);'>"+r.Total+"</span> 块数据，成功写入 <span style='color: rgb(255, 0, 0);'>"+r.Success+"</span> 块数据":"写卡成功",(0,i.default)({context:d,selector:"#t-toast",duration:5e3,message:t})):o.ans===d.data._deviceutil.decode_message.err_writecard&&(c=t="写卡失败。请确认复制卡是否正确，或移动卡片放置位置/距离后再尝试",(0,i.default)({context:d,selector:"#t-toast",duration:5e3,message:t})),d.data.select.id!=e.card_type.id&&d.setData({"cardhub.HF.data_text":r.str_data}),d.setData({"SetCardDataDialog.stoping":!1,"cardhub.tip_text":c}),d.data.QuitDecode.wait&&(d.data.QuitDecode.wait=!1,wx.navigateBack())}},(d=a).setData({"SetCardDataDialog.writing":!0}),r=a.data.BLE.deviceId,t.next=6,a.data._deviceutil.CardDataSetAsync(r,a.data.select.id,a.data.select.data_info,a.data.select.data_hex,a.data.select.data_hash,o);case 6:a.setData({"SetCardDataDialog.show":!1,"SetCardDataDialog.writing":!1,"SetCardDataDialog.stoping":!1});case 7:case"end":return t.stop()}}),t)})))()},SimulateTagAndBack:function(a){var t=a.target.dataset.id;if("full"===t||"readonly"===t)this.DoSimulateTagAsync(t);else if("readTag"===t)this.DetectionReadDeviceTagAsync();else{this.data.SimulateTagDialog.show=!1,this.data.SimulateTagDialog.simulate=!1,this.data.SimulateTagDialog.stoping=!1;for(var e=0;e<this.data.SimulateTagDialog.list.length;e++)this.data.SimulateTagDialog.list[e].loading=!1;this.setData({SimulateTagDialog:this.data.SimulateTagDialog});var d="/pages/DataControl/TestSimulateTag",i={cardtype:this.data.cardhub.HF.cardtype,data:this.data.cardhub.HF.data_hex,datainfo:this.data.cardhub.HF.data_info,strType:this.data.cardhub.HF.card_type},s=JSON.stringify(i);d=d+"?data="+encodeURIComponent(s),setTimeout((function(){wx.navigateTo({url:d})}),1e3)}},DetectionReadDeviceTagAsync:function(){var a=this;return d(e().mark((function d(){var o,r,c,n,h,l,u,g,D,_,f,b,v,p,m,y,w,x,C,I,S,F,T,H,E;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o={stop:a.data.SimulateTagDialog.stoping},a.data.SimulateTagDialog.simulate=!0,r=0;r<a.data.SimulateTagDialog.list.length;r++)"readTag"===a.data.SimulateTagDialog.list[r].id?a.data.SimulateTagDialog.list[r].loading=!0:a.data.SimulateTagDialog.list[r].loading=!1;return a.setData({SimulateTagDialog:a.data.SimulateTagDialog}),c=a.data.BLE.deviceId,e.next=7,a.data._deviceutil.GetHFTagDataAsync(c,null,0,2,o,void 0);case 7:if(0===(n=e.sent).ans&&n.data.length>32){if(h=new s.cardUtil,l=n.data.slice(0,10),u=n.data[10],(g=new Array(2))[0]=n.data[11],g[1]=n.data[12],D=n.data[13],_=n.data[15],f=h.sectorToFirstBlock(_-1)+h.numberOfBlocks(_-1),(b=16*f)+32<=n.data.length){for(v=n.data.slice(32,b+32),p=new Array(16).fill(0),u=u>10?10:u,m=0;m<u;m++)p[m]=l[m];for(4===u?(p[4]=l[0]^l[1]^l[2]^l[3],p[5]=D,p[6]=g[0],p[7]=g[1]):(p[u]=D,p[u+1]=g[0],p[u+2]=g[1]),y="",w=0;w<16;w++)y+=("00"+p[w].toString(16)).slice(-2).toUpperCase();for(a.setCardData("",h.card_type.MF,y,v),x=[216,245,226,63,106,123],C=[],I=0;I<f;I++){if(S=v.slice(16*I,16*I+16),h.trailer_block(I))for(F=0;F<2;F++)if(T=S.slice(0===F?0:10,0===F?6:16),JSON.stringify(T)===JSON.stringify(x))for(console.log("替换默认密码"),H=0;H<6;H++)S[(0===F?0:10)+H]=255;C.push.apply(C,t(S))}a.data.cardhub.HF.data_hex=C,a.updateCardData()}(0,i.default)({context:a,selector:"#t-toast",message:"读取完成"})}else(0,i.default)({context:a,selector:"#t-toast",message:"读取失败"});for(a.data.SimulateTagDialog.show=!1,a.data.SimulateTagDialog.simulate=!1,a.data.SimulateTagDialog.stoping=!1,E=0;E<a.data.SimulateTagDialog.list.length;E++)a.data.SimulateTagDialog.list[E].loading=!1;a.setData({SimulateTagDialog:a.data.SimulateTagDialog});case 14:case"end":return e.stop()}}),d)})))()},DoSimulateTagAsync:function(a){var t=this;return d(e().mark((function d(){var s,o,r,c,n,h;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=function(a){var t="";switch(a.msg){case s.data._deviceutil.decode_message.start:t="开始模拟...",s.setData({"SimulateTagDialog.stoping":!1});break;case s.data._deviceutil.decode_message.end:var e=a.data;e.ans===s.data._deviceutil.decode_message.cancel?(t="操作已取消",(0,i.default)({context:s,selector:"#t-toast",message:t})):e.ans===s.data._deviceutil.decode_message.simulate_success?(t="模拟成功",(0,i.default)({context:s,selector:"#t-toast",duration:5e3,message:t})):e.ans===s.data._deviceutil.decode_message.err_simulate&&(t="模拟失败",(0,i.default)({context:s,selector:"#t-toast",message:t})),s.setData({"SimulateTagDialog.stoping":!1}),s.data.QuitDecode.wait&&(s.data.QuitDecode.wait=!1,wx.navigateBack())}},s=t,r=0,"full"===a?r=0:"readonly"===a&&(r=2),t.data.SimulateTagDialog.simulate=!0,c=0;c<t.data.SimulateTagDialog.list.length;c++)t.data.SimulateTagDialog.list[c].id===a?t.data.SimulateTagDialog.list[c].loading=!0:t.data.SimulateTagDialog.list[c].loading=!1;return s.setData({SimulateTagDialog:t.data.SimulateTagDialog}),n=t.data.BLE.deviceId,e.next=10,t.data._deviceutil.SimulateTagAsync(n,s.data.cardhub.HF.cardtype,s.data.cardhub.HF.data_info,s.data.cardhub.HF.data_hex,!0,r,o);case 10:for(t.data.SimulateTagDialog.show=!1,t.data.SimulateTagDialog.simulate=!1,t.data.SimulateTagDialog.stoping=!1,h=0;h<t.data.SimulateTagDialog.list.length;h++)t.data.SimulateTagDialog.list[h].loading=!1;t.setData({SimulateTagDialog:t.data.SimulateTagDialog});case 15:case"end":return e.stop()}}),d)})))()},DoExportDialog:function(){this.onCardExport(0),this.closeExportDialog()},onSetNewCardVisibleChange:function(a){this.setData({visible_setNewCard:a.detail.visible})},onCardExportVisibleChange:function(a){this.setData({visible_cardExport:a.detail.visible})},onCardSelectChange:function(a){this.setData({visible_cardSelect:a.detail.visible})},onSetNewCard:function(a){var t=a.currentTarget.dataset.index;this.setData({visible_setNewCard:!1}),setTimeout((function(){"1"===t?wx.navigateTo({url:"/pages/DataControl/DataModify?type=0"}):"2"===t?wx.navigateTo({url:"/pages/DataControl/SetNewIDCardData?type=0"}):wx.navigateTo({url:"/pages/DataControl/setNFCTag"})}),100)},onSelectCard:function(a){var t=a.currentTarget.dataset.index;this.data.select.id=t,this.DoDataControl(this.data.select.control,this.data.select.id,this.data.select.data_hash),this.setData({visible_cardSelect:!1})},onCardExportTo:function(a){var t,e=new s.cardUtil;t=this.data.select.id===e.card_type.id?e.getCardInfo(this.data.cardhub.ID.cardtype,this.data.cardhub.ID.info,null):e.getCardInfo(this.data.cardhub.HF.cardtype,this.data.cardhub.HF.info,null);var d=this.data.cardhub.file_name;if((0,o.stringIsEmpty)(d)){var i=new Date,r=i.getFullYear(),c=i.getMonth()+1,n=i.getDate(),h=i.getHours(),l=i.getMinutes(),u=i.getSeconds(),g=i.getMilliseconds();d=t.CardID+"_"+r+c+n+h+l+u+g}this.setData({exportName:d});var D=a.currentTarget.dataset.index;"1"===D?this.onCopy2ClipBoard():"2"===D?this.setData({showExportDialog:!0}):"3"===D?this.onCardExport(1):"4"===D?this.OnUpdateShareData():"5"===D&&this.OnGetKeyFromData(),this.setData({visible_cardExport:!1})},onExportNameInput:function(a){this.data.exportName=a.detail.value,this.setData({exportNameError:""})},onCopy2ClipBoard:function(){if(this.data.select.id<=0)console.log("参数错误");else{var a=new s.cardUtil,t=a.getCardDataLine(this.data.select.id,this.data.select.data_hex),e="";if(t.Data&&t.Data.length>=0){if(this.data.select.id===a.card_type.id)t.Data[0].list.length>0&&(e=t.Data[0].list[0].hex_data);else if(this.data.select.id===a.card_type.ULEV1){var d=new Array(4);d[0]=this.data.select.data_hex[68],d[1]=this.data.select.data_hex[69],d[2]=this.data.select.data_hex[70],d[3]=this.data.select.data_hex[71],e+=(0,o.hex2string)(d,4)+"\r\n";for(var i=new Array(2),r=new Array(1),c=0;c<2;c++)i[c]=this.data.select.data_hex[4+c];r[0]=this.data.select.data_hex[6];var n=this.data.select.data_hex[18];n=n>10?10:n;for(var h=new Array(n),l=0;l<n;l++)h[l]=this.data.select.data_hex[7+l];e+=(0,o.hex2string)(h,n)+"\r\n",e+=(0,o.hex2string)(i,2)+(0,o.hex2string)(r,1)+"\r\n";for(var u=new Array(32),g=0;g<32;g++)u[g]=this.data.select.data_hex[36+g];e+=(0,o.hex2string)(u,32)+"\r\n";var D=new Array(17).fill(0),_=this.data.select.data_hex[19];_=_>16?16:_,D[0]=_;for(var f=0;f<_;f++)D[f+1]=this.data.select.data_hex[20+f];e+=(0,o.hex2string)(D,17)+"\r\n";for(var b=0;b<t.Data[0].list.length;b++)e+=t.Data[0].list[b].hex_data+"\r\n"}else for(var v=0;v<t.Data.length;v++){e+=t.Data[v].name+"\r\n";for(var p=0;p<t.Data[v].list.length;p++)e+=t.Data[v].list[p].hex_data+"\r\n"}e.length>0&&wx.setClipboardData({data:e,success:function(a){}})}}},onCardExport:function(a){var t=this;if(t.data.select.id<=0)console.log("参数错误");else{var e=new s.cardUtil,d=new r.fileUtil,i="".concat(wx.env.USER_DATA_PATH,"/CopyKEY");if(1===a&&(i+="/share"),d.access(i)||d.mkdir(i),d.access(i)){var o=i+"/"+this.data.exportName;this.data.select.id===e.card_type.id?o+=".id":this.data.select.id===e.card_type.ULEV1?o+=".ulev1":o+=".dump";var c=new Uint8Array(this.data.select.data_hex);d.writeFile(o,c)?1===a&&wx.shareFileMessage({filePath:o,success:function(a){t.showMessage("分享数据成功",3e3,"success")},fail:function(a){}}):t.showMessage("导出数据失败",5e3,"warning")}}},OnUpdateShareData:function(){var a=wx.getStorageSync("userInfo");if(a){var t=this,e={wechat_id:a.wechat_id,user_account:a.user_account,type:0,cardtype:this.data.select.id,data:this.data.select.data_hex};(0,o.request)("POST","CopyKEY/ShareCardData",e,(function(a){if(null!=a){n.hideToast(this,"#t-toast");var e=a;wx.setClipboardData({data:e.data.url,success:function(a){wx.hideToast(),(0,i.default)({context:t,selector:"#t-toast",message:"已复制分享链接"})}})}}),(function(a){(0,i.default)({context:t,selector:"#t-toast",message:"分享数据失败"})}),(function(a){})),n.showLoadingToast(this,"#t-toast")}},OnGetKeyFromData:function(){var a=new s.cardUtil;if(this.data.cardhub.has_hf&&this.data.cardhub.HF.cardtype==a.card_type.MF){for(var t=a.GetMFTagDataKeys(this.data.cardhub.HF.data_hex),e=0,d=0,r=!1,c=0;c<t.length;c++){var h=(0,o.hex2string)(t[c],6,!0),l=n.addKeyStore(h,!1);if(2===l){r=!0;break}1===l?e++:d++}var u="";u=e===t.length?"添加成功":r?"密码库已满，请先清理数据。成功 "+e+" 组/重复 "+d+" 组":"添加成功 "+e+" 组/重复 "+d+" 组",e>0&&n.updateKeyStore(),(0,i.default)({context:this,selector:"#t-toast",message:u})}else this.showMessage("不是有效IC数据，请先获取数据",5e3,"warning")},showMessage:function(a,t){var e=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";t>0&&(this.data.showMessage.durationID>0&&(clearTimeout(this.data.showMessage.durationID),this.data.showMessage.durationID=0),this.data.showMessage.durationID=setTimeout((function(){e.closeMessage()}),t)),this.setData({"showMessage.show":!0,"showMessage.message":a,"showMessage.theme":d})},closeMessage:function(){this.data.showMessage.durationID>0&&(clearTimeout(this.data.showMessage.durationID),this.data.showMessage.durationID=0),this.setData({"showMessage.show":!1,"showMessage.message":""})},onBeforeBack:function(a){this.data.is_decoding?this.setData({"QuitDecode.show":!0}):setTimeout((function(){wx.navigateBack()}),100)},closeCheckGoOnDialog:function(a){this.CheckGoOn(!1)},quitAndGoOn:function(a){this.CheckGoOn(!0)},CheckGoOn:function(a){this.setData({"waitforCheckGoOnDialog.show":!1}),clearInterval(this.data.waitforCheckGoOnDialog.ID),"function"==typeof this.data.waitforCheckGoOnDialog.callback&&this.data.waitforCheckGoOnDialog.callback(a),this.data.waitforCheckGoOnDialog.callback=function(a){}},closeQuitDialog:function(a){this.setData({showContainerPage:!0,"QuitDecode.show":!1})},quitAndBack:function(a){this.data._deviceutil.SetDecoding(n.globalData.data.devices.deviceId,!1),this.setData({"QuitDecode.show":!1}),this.data.QuitDecode.wait=!0,n.showLoadingToast(this,"#t-toast")},onAutoShowChange:function(a){var t=a.detail.checked;this.setData({"SetCardDataDialog.NoAutoShow":t});var e=n.loadConfigInfo();e.autoShowSetCardData=!t,n.updateConfigInfo(e),e.autoShowSetCardData||(0,i.default)({context:this,selector:"#t-toast",message:"下次不再自动弹出，可在我的功能设置里重新打开"})}});
},{isPage:true,isComponent:true,currentFile:'pages/DataControl/index.js'});require("pages/DataControl/index.js");