$gwx_XC_50=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_50 || [];
function gz$gwx_XC_50_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_50_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_50_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_50_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'t-toast'])
Z([1,false])
Z([3,'bottom'])
Z([[6],[[7],[3,'EditTag']],[3,'show']])
Z([3,'popup-body'])
Z([3,'onRefreshUID'])
Z([3,'refresh'])
Z([3,'green'])
Z(z[6])
Z([3,'38rpx'])
Z([[2,'==='],[[7],[3,'add_type']],[1,0]])
Z([3,'onSectorNumChange'])
Z([3,'16'])
Z([3,'sector-select-radiobox'])
Z([[6],[[7],[3,'EditTag']],[3,'select_sector']])
Z(z[1])
Z([3,'0-15扇区'])
Z(z[12])
Z(z[1])
Z([3,'0-17扇区'])
Z([3,'18'])
Z(z[1])
Z([3,'0-39扇区'])
Z([3,'40'])
Z(z[1])
Z(z[2])
Z([[7],[3,'showEditKeyBlockDialog']])
Z([3,'onBeforeBack'])
Z([3,'center'])
Z([[7],[3,'showContainerPage']])
Z(z[1])
Z([3,'nav-title'])
Z([[7],[3,'navbar_title']])
Z([3,'custom-capsule'])
Z([3,'capsule'])
Z([3,'返回'])
Z([3,'button'])
Z([3,'onBack'])
Z([3,'custom-capsule__icon'])
Z([3,'chevron-left'])
Z([3,'20'])
Z([3,'保存'])
Z(z[36])
Z([3,'onSaveData'])
Z(z[38])
Z([3,'save'])
Z(z[40])
Z([3,'closeSaveDialog'])
Z([3,'saveAndBack'])
Z([3,'否'])
Z([3,'是'])
Z([3,'数据已修改，请确保修改的数据格式正确。是否保存数据？'])
Z([3,'保存数据'])
Z([[7],[3,'showSaveData']])
Z([3,'closeSaveNewDialog'])
Z([3,'saveNewAndBack'])
Z(z[49])
Z(z[50])
Z([3,'数据已生成，请确保生成的数据格式正确。是否新增该数据？'])
Z([3,'新增数据'])
Z([[7],[3,'showSaveNewData']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_50_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_50_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_50=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_50=true;
var x=['./pages/DataControl/DataModify.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_50_1()
var oPU=_n('t-toast')
_rz(z,oPU,'id',0,e,s,gg)
_(r,oPU)
var cQU=_mz(z,'t-popup',['closeOnOverlayClick',1,'placement',1,'visible',2],[],e,s,gg)
var oRU=_n('view')
_rz(z,oRU,'class',4,e,s,gg)
var aTU=_mz(z,'t-icon',['bind:click',5,'class',1,'color',2,'name',3,'size',4],[],e,s,gg)
_(oRU,aTU)
var lSU=_v()
_(oRU,lSU)
if(_oz(z,10,e,s,gg)){lSU.wxVkey=1
var tUU=_mz(z,'t-radio-group',['borderless',-1,'bind:change',11,'defaultValue',1,'tClass',2,'value',3],[],e,s,gg)
var eVU=_mz(z,'t-radio',['block',15,'label',1,'value',2],[],e,s,gg)
_(tUU,eVU)
var bWU=_mz(z,'t-radio',['block',18,'label',1,'value',2],[],e,s,gg)
_(tUU,bWU)
var oXU=_mz(z,'t-radio',['block',21,'label',1,'value',2],[],e,s,gg)
_(tUU,oXU)
_(lSU,tUU)
}
lSU.wxXCkey=1
lSU.wxXCkey=3
_(cQU,oRU)
_(r,cQU)
var xYU=_mz(z,'t-popup',['closeOnOverlayClick',24,'placement',1,'visible',2],[],e,s,gg)
_(r,xYU)
var oZU=_mz(z,'page-container',['bind:beforeleave',27,'position',1,'show',2],[],e,s,gg)
var f1U=_mz(z,'t-navbar',['animation',30,'tClassTitle',1,'title',2],[],e,s,gg)
var c2U=_mz(z,'view',['class',33,'slot',1],[],e,s,gg)
var h3U=_mz(z,'t-icon',['ariaLabel',35,'ariaRole',1,'bind:tap',2,'class',3,'name',4,'size',5],[],e,s,gg)
_(c2U,h3U)
var o4U=_mz(z,'t-icon',['ariaLabel',41,'ariaRole',1,'bind:tap',2,'class',3,'name',4,'size',5],[],e,s,gg)
_(c2U,o4U)
_(f1U,c2U)
_(oZU,f1U)
_(r,oZU)
var c5U=_mz(z,'t-dialog',['bind:cancel',47,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,c5U)
var o6U=_mz(z,'t-dialog',['bind:cancel',54,'bind:confirm',1,'cancelBtn',2,'confirmBtn',3,'content',4,'title',5,'visible',6],[],e,s,gg)
_(r,o6U)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_50";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_50();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/DataControl/DataModify.wxml'] = [$gwx_XC_50, './pages/DataControl/DataModify.wxml'];else __wxAppCode__['pages/DataControl/DataModify.wxml'] = $gwx_XC_50( './pages/DataControl/DataModify.wxml' );
	;__wxRoute = "pages/DataControl/DataModify";__wxRouteBegin = true;__wxAppCurrentFile__="pages/DataControl/DataModify.js";define("pages/DataControl/DataModify.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var a,t=require("../../@babel/runtime/helpers/toConsumableArray"),r=require("../../utils/util"),e=require("../../utils/cardUtil"),d=(a=require("tdesign-miniprogram/toast/index"))&&a.__esModule?a:{default:a};var o=getApp();Page({data:{navbar_title:"修改数据",add_type:0,goto_back:!1,showSaveData:!1,showSaveNewData:!1,data_scroll_height:0,showContainerPage:!0,beSaved:!1,EditTag:{show:!1,select_sector:"16"},showEditKeyBlockDialog:!1,input_style:"border-bottom: 0.5px solid rgba(220,220,220,0.4);color:#000;",input_error_sytle:"border-bottom: 0.5px solid rgba(220,0,0,0.8);color:#FF0000;",cardhub:{cardtype:0,data:[],Sectors:[],mod_data:[],data_info:{uid:[],size:0,ATQA:[],sak:0,proID:[],num_sectors:16},card_uid:{value:"",cursor:0,error:!1},card_atqa:{value:"04 00",cursor:0,error:!1},card_sak:{value:"08",cursor:0,error:!1},card_data_text:"",card_proID:{value:"00 00 00 00 00 00 00 00",cursor:0,length:8,error:!1},control_block:{sector:"",block:0,keyA:{value:"FF FF FF FF FF FF",cursor:0,error:!1},Control:{value:"FF 07 80 69",cursor:0,error:!1},keyB:{value:"FF FF FF FF FF FF",cursor:0,error:!1}}},saveFabButton:{icon:"save",theme:"primary",size:"small"}},onLoad:function(a){var t=new e.cardUtil,r="修改数据";if(a.type&&"1"===a.type&&a.data){var d=JSON.parse(decodeURIComponent(a.data));this.data.cardhub.cardtype=d.cardtype,this.data.cardhub.data=d.data;var o=t.getCardDataLine(this.data.cardhub.cardtype,this.data.cardhub.data);if(this.data.cardhub.cardtype===t.card_type.MF){var i=t.getCardInfo(t.card_type.MF,o.Data[0].list[0].hex_data,null),c=i.Data.size;c+=4===c?4:3;var s=this.data.cardhub.data.slice(c,16);this.data.cardhub.data_info.uid=i.Data.uid,this.data.cardhub.data_info.size=i.Data.size,this.data.cardhub.data_info.ATQA=i.Data.ATQA,this.data.cardhub.data_info.sak=i.Data.sak,this.data.cardhub.data_info.proID=s,this.data.cardhub.data_info.num_sectors=o.Data.length}this.data.add_type=1,this.setData({"cardhub.Sectors":o.Data})}else if(a.type&&"0"===a.type){r="新建数据";var h=this.CreatNewMFData();this.data.cardhub.cardtype=t.card_type.MF,this.data.cardhub.data=h;var u=t.getCardDataLine(this.data.cardhub.cardtype,this.data.cardhub.data);this.setData({"cardhub.Sectors":u.Data,"EditTag.show":!0}),this.data.add_type=0}this.setData({navbar_title:r,add_type:this.data.add_type})},onReady:function(){var a=o.getSystemInfo(),t=a.pageHeight-a.headerHeight;this.setData({data_scroll_height:t-12})},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},getInputValue:function(a){var t=this,r={value:"",cursor:0},e=a.detail,d=e.value,o=e.cursor,i=a.currentTarget.dataset.index,c=this.data.cardhub.Sectors;return c&&c.forEach((function(a){var e=a.list;e&&e.forEach((function(a){if(a.id===i){var e=t.InputChange(d,a.cursor,o,a.hex_data,a.data.length,!0);return a.hex_data=e.value,a.cursor=e.cursor,r.value=e.value,void(r.cursor=e.cursor)}}))})),r},saveEditData:function(a,t,d){var o=new e.cardUtil,i=(0,r.string2Hex)(t),c="",s="",h=this.data.cardhub.cardtype===o.card_type.ULEV1?4:16;i.length<h&&(i=i.concat(d.slice(i.length,h)));for(var u=i.length>h?h:i.length,n=0;n<d.length;n++){var l=d[n],b=("00"+l.toString(16)).slice(-2).toUpperCase(),v=b;n<u&&l!=i[n]&&(v="<span style='color: rgb(255, 0, 0);'>"+(b=("00"+i[n].toString(16)).slice(-2).toUpperCase())+"</span>"),c+=v+(n<h-1?" ":""),s+=b+(n<h-1?" ":"")}return this.data.cardhub.cardtype===o.card_type.ULEV1&&(c=("0000"+a.toString()).slice(-4)+"(0x"+("00"+a.toString(16)).slice(-2).toUpperCase()+") "+c),{Html:c,Hex:s}},onClickData:function(a){var t=this,d=new e.cardUtil,o=a.currentTarget.dataset.index,i=this.data.cardhub.Sectors;i&&(i.forEach((function(a){var e=a.list;e&&e.forEach((function(e){if(e.id===o)if(t.data.cardhub.cardtype===d.card_type.MF&&0===e.id){var i=(0,r.hex2string)(t.data.cardhub.data_info.uid,t.data.cardhub.data_info.size),c=(0,r.hex2string)(t.data.cardhub.data_info.ATQA,2,!0),s=new Array(1);s[0]=t.data.cardhub.data_info.sak;var h=(0,r.hex2string)(s,1),u=(0,r.hex2string)(t.data.cardhub.data_info.proID,t.data.cardhub.data_info.proID.length,!0);t.setData({"EditTag.show":!0,"cardhub.card_uid.value":i,"cardhub.card_atqa.value":c,"cardhub.card_sak.value":h,"cardhub.card_proID.value":u,"EditTag.select_sector":t.data.cardhub.data_info.num_sectors.toString()})}else if(t.data.cardhub.cardtype===d.card_type.MF&&d.trailer_block(e.id)){var n=(0,r.string2Hex)(e.hex_data),l=n.slice(0,6),b=n.slice(6,10),v=n.slice(10,16);t.setData({showEditKeyBlockDialog:!0,"cardhub.control_block.block":e.id,"cardhub.control_block.sector":a.name,"cardhub.control_block.keyA.value":(0,r.hex2string)(l,6,!0),"cardhub.control_block.Control.value":(0,r.hex2string)(b,4,!0),"cardhub.control_block.keyB.value":(0,r.hex2string)(v,6,!0)})}else e.is_edit=!0;else if(e.is_edit){var _=t.saveEditData(e.id,e.hex_data,e.data);e.hex_data=_.Hex,e.html_data=_.Html,e.is_edit=!1}}))})),this.setData({cardhub:this.data.cardhub}))},onBack:function(){0===this.data.add_type?this.onSaveNewData():(this.data.goto_back=!0,this.onSaveData())},onSaveData:function(){var a=this;if(0===this.data.add_type)this.onSaveNewData();else if(this.data.beSaved)wx.navigateBack();else{var t=new e.cardUtil,d=this.data.cardhub.cardtype===t.card_type.ULEV1?4:16,o=this.data.cardhub.Sectors;if(o){var i=!1,c=[];o.forEach((function(t){var e=t.list;e&&e.forEach((function(t){if(t.is_edit){var e=a.saveEditData(t.id,t.hex_data,t.data);t.hex_data=e.Hex,t.html_data=e.Html,t.is_edit=!1}for(var o=(0,r.string2Hex)(t.hex_data),s=0;s<d;s++)t.data[s]!=o[s]&&(i=!0),c.push(o[s])}))})),this.data.cardhub.cardtype===t.card_type.MF?this.data.cardhub.mod_data=c:this.data.cardhub.mod_data=this.data.cardhub.data.slice(0,74).concat(c),i?this.showSaveDialog():wx.navigateBack()}}},onSaveNewData:function(){this.showSaveNewDialog()},saveAndBack:function(){var a=getCurrentPages();if(a.length>=2){var t=a[a.length-2];"pages/DataControl/index"===t.route&&(t.data.cardhub.HF.data_hex=this.data.cardhub.mod_data,t.updateCardData())}this.data.beSaved=!0,wx.navigateBack()},showSaveDialog:function(){this.setData({showSaveData:!0})},closeSaveDialog:function(){this.setData({showSaveData:!1}),this.data.goto_back&&wx.navigateBack()},showSaveNewDialog:function(){this.setData({showSaveNewData:!0})},saveNewAndBack:function(){var a=this,t=new e.cardUtil,d=this.data.cardhub.Sectors;if(d){var o=[];d.forEach((function(t){var e=t.list;e&&e.forEach((function(t){if(t.is_edit){var e=a.saveEditData(t.id,t.hex_data,t.data);t.hex_data=e.Hex,t.html_data=e.Html,t.is_edit=!1}for(var d=(0,r.string2Hex)(t.hex_data),i=0;i<16;i++)o.push(d[i])}))})),this.data.cardhub.mod_data=o;var i=getCurrentPages();if(i.length>=2){var c=i[i.length-2];if("pages/DataControl/index"===c.route){for(var s="",h=0;h<16;h++)s+=("00"+o[h].toString(16)).slice(-2).toUpperCase();c.setCardData("新建数据",t.card_type.MF,s,o)}}}wx.navigateBack()},closeSaveNewDialog:function(){this.setData({showSaveNewData:!1}),wx.navigateBack()},onBeforeBack:function(a){0===this.data.add_type||this.data.goto_back?wx.navigateBack():this.onBack()},EditTagDialog:function(){var a=new e.cardUtil,o=(0,r.string2Hex)(this.data.cardhub.card_uid.value),i=(0,r.string2Hex)(this.data.cardhub.card_atqa.value),c=(0,r.string2Hex)(this.data.cardhub.card_sak.value),s=(0,r.string2Hex)(this.data.cardhub.card_proID.value);if(o.length<4)this.setData({"cardhub.card_uid.error":!0});else if(2==i.length)if(1==c.length)if(s.length<=0)this.setData({"cardhub.card_proID.error":!0});else{var h=Number(this.data.EditTag.select_sector);if(this.data.cardhub.data_info.num_sectors!=h){if(this.data.cardhub.data_info.num_sectors<h){var u,n=a.SetEmptyMFTagDataBySectors(this.data.cardhub.data_info.uid,this.data.cardhub.data_info.ATQA,this.data.cardhub.data_info.sak,this.data.cardhub.data_info.proID,h),l=n.splice(this.data.cardhub.data.length,n.length-this.data.cardhub.data.length);(u=this.data.cardhub.data).push.apply(u,t(l))}else{var b=a.sectorToFirstBlock(h),v=this.data.cardhub.data.splice(0,16*b);this.data.cardhub.data=v}this.data.cardhub.data_info.num_sectors=h;var _=a.getCardDataLine(this.data.cardhub.cardtype,this.data.cardhub.data);this.setData({"cardhub.Sectors":_.Data})}this.ShowMFCardInfo(o,i,c,s),this.setData({"EditTag.show":!1}),(0,d.default)({context:this,selector:"#t-toast",message:"编辑完成"})}else this.setData({"cardhub.card_sak.error":!0});else this.setData({"cardhub.card_atqa.error":!0})},closeEditTagDialog:function(){this.setData({"EditTag.show":!1})},EditKeyBlockDialog:function(){var a=this,t=new e.cardUtil,o=(0,r.string2Hex)(this.data.cardhub.control_block.keyA.value);if(6==o.length){var i=(0,r.string2Hex)(this.data.cardhub.control_block.Control.value);if(4==i.length){var c=(0,r.string2Hex)(this.data.cardhub.control_block.keyB.value);if(6==c.length){for(var s=new Array(16).fill(255),h=0;h<6;h++)s[h]=o[h],s[h+10]=c[h];for(var u=0;u<4;u++)s[u+6]=i[u];var n=t.blockToSector(this.data.cardhub.control_block.block),l=this.data.cardhub.Sectors;if(n<l.length)l[n].list.forEach((function(t){if(t.id===a.data.cardhub.control_block.block){var e=t,o=(0,r.hex2string)(s,16),i=a.saveEditData(e.id,o,e.data);return e.hex_data=i.Hex,e.html_data=i.Html,a.setData({showEditKeyBlockDialog:!1,"cardhub.Sectors":l}),void(0,d.default)({context:a,selector:"#t-toast",message:"编辑完成"})}}))}else this.setData({"cardhub.control_block.keyB.error":!0})}else this.setData({"cardhub.control_block.Control.error":!0})}else this.setData({"cardhub.control_block.keyA.error":!0})},closeEditKeyBlockDialog:function(a){this.setData({showEditKeyBlockDialog:!1})},FillMFCardInfo:function(a,t,r,d){var o=new e.cardUtil,i=4,c=new Array(4).fill(255),s=new Array(2).fill(0);if(t.length>=1&&(s[0]=t[0]),t.length>=2&&(s[1]=t[1]),s[0]&=63,a.length<=4){i=4;for(var h=0;h<a.length;h++)c[h]=a[h]}else if(a.length<=7){i=7,c=new Array(7).fill(0);for(var u=0;u<a.length&&u<7;u++)c[u]=a[u];s[0]|=64}else{i=10,c=new Array(10).fill(0);for(var n=0;n<a.length&&n<10;n++)c[n]=a[n];s[0]|=128}this.data.cardhub.cardtype=o.card_type.MF,this.data.cardhub.data_info.uid=c,this.data.cardhub.data_info.size=i,this.data.cardhub.data_info.sak=r[0],this.data.cardhub.data_info.ATQA=s,4===i&&(i=5);var l=new Array(16-i-3).fill(0),b=d.length;b=b>16-i-3?16-i-3:b;for(var v=0;v<b;v++)l[v]=d[v];this.data.cardhub.data_info.proID=l},ShowMFCardInfo:function(a,t,e,d){this.FillMFCardInfo(a,t,e,d);for(var o=(0,r.hex2string)(this.data.cardhub.data_info.uid,this.data.cardhub.data_info.size),i=this.data.cardhub.data_info.size,c=new Array(16).fill(0),s=0;s<i;s++)c[s]=this.data.cardhub.data_info.uid[s];4===i&&(c[4]=c[0]^c[1]^c[2]^c[3],i=5),c[i]=this.data.cardhub.data_info.sak,c[i+1]=this.data.cardhub.data_info.ATQA[0],c[i+2]=this.data.cardhub.data_info.ATQA[1];for(var h=this.data.cardhub.data_info.proID,u=h.length,n=0;n<u&&n<16-i-3;n++)c[i+3+n]=h[n];var l=this.data.cardhub.Sectors,b=l[0].list[0],v=(0,r.hex2string)(c,16),_=this.saveEditData(b.id,v,b.data);b.hex_data=_.Hex,b.html_data=_.Html,this.setData({"cardhub.card_uid.value":o,"cardhub.card_atqa.value":(0,r.hex2string)(this.data.cardhub.data_info.ATQA,2,!0),"cardhub.Sectors":l})},onRefreshUID:function(){for(var a=this.data.cardhub.card_uid.value,t=a.length<=8?4:a.length<=14?7:10,r="",e=0;e<t;e++){r+=("00"+Math.floor(256*Math.random()).toString(16)).slice(-2).toUpperCase()}this.setData({"cardhub.card_uid.value":r})},onUIDInput:function(a){var t=a.detail,e=t.value,d=t.cursor,o=(0,r.string2HexByte)(e),i=this.UIDInputChange(e,d,o.length<=8?4:o.length<=14?7:10,!1);return this.setData({"cardhub.card_uid.value":i.value,"cardhub.card_uid.cursor":i.cursor}),i.value.length>0&&this.data.cardhub.card_uid.error&&this.setData({"cardhub.card_uid.error":!1}),{value:i.value,cursor:i.cursor}},onAtqaInput:function(a){var t=a.detail,r=t.value,e=t.cursor,d=this.InputChange(r,this.data.cardhub.card_atqa.cursor,e,this.data.cardhub.card_atqa.value,2,!0);return this.setData({"cardhub.card_atqa.value":d.value,"cardhub.card_atqa.cursor":d.cursor}),d.value.length>0&&this.data.cardhub.card_atqa.error&&this.setData({"cardhub.card_atqa.error":!1}),{value:d.value,cursor:d.cursor}},onSakInput:function(a){var t=a.detail,r=t.value,e=t.cursor,d=this.InputChange(r,this.data.cardhub.card_sak.cursor,e,this.data.cardhub.card_sak.value,1,!1);return this.setData({"cardhub.card_sak.value":d.value,"cardhub.card_sak.cursor":d.cursor}),d.value.length>0&&this.data.cardhub.card_sak.error&&this.setData({"cardhub.card_sak.error":!1}),{value:d.value,cursor:d.cursor}},onProIDInput:function(a){var t=a.detail,r=t.value,e=t.cursor,d=this.InputChange(r,this.data.cardhub.card_proID.cursor,e,this.data.cardhub.card_proID.value,this.data.cardhub.card_proID.length,!0);return this.setData({"cardhub.card_proID.value":d.value,"cardhub.card_proID.cursor":d.cursor}),d.value.length>0&&this.data.cardhub.card_proID.error&&this.setData({"cardhub.card_proID.error":!1}),{value:d.value,cursor:d.cursor}},onKeyAInput:function(a){var t=a.detail,r=t.value,e=t.cursor,d=this.InputChange(r,this.data.cardhub.control_block.keyA.cursor,e,this.data.cardhub.control_block.keyA.value,6,!0);return this.setData({"cardhub.control_block.keyA.value":d.value,"cardhub.control_block.keyA.cursor":d.cursor}),d.value.length>0&&this.data.cardhub.control_block.keyA.error&&this.setData({"cardhub.control_block.keyA.error":!1}),{value:d.value,cursor:d.cursor}},onKeyControlInput:function(a){var t=a.detail,r=t.value,e=t.cursor,d=this.InputChange(r,this.data.cardhub.control_block.Control.cursor,e,this.data.cardhub.control_block.Control.value,4,!0);return this.setData({"cardhub.control_block.Control.value":d.value,"cardhub.control_block.Control.cursor":d.cursor}),d.value.length>0&&this.data.cardhub.control_block.Control.error&&this.setData({"cardhub.control_block.Control.error":!1}),{value:d.value,cursor:d.cursor}},onKeyBInput:function(a){var t=a.detail,r=t.value,e=t.cursor,d=this.InputChange(r,this.data.cardhub.control_block.keyB.cursor,e,this.data.cardhub.control_block.keyB.value,6,!0);return this.setData({"cardhub.control_block.keyB.value":d.value,"cardhub.control_block.keyB.cursor":d.cursor}),d.value.length>0&&this.data.cardhub.control_block.keyB.error&&this.setData({"cardhub.control_block.keyB.error":!1}),{value:d.value,cursor:d.cursor}},InputChange:function(a,t,e,d,o,i){var c=(0,r.string2HexByte)(a),s=(0,r.string2HexByte)(d),h=new Array(2*o).fill(0),u=e;if(-1!=u){for(var n=a.slice(0,u),l=(0,r.string2HexByte)(n),b=0;b<l.length&&b<h.length;b++)h[b]=l[b];if(c.length>s.length)for(var v=l.length;v<s.length;v++)h[v]=s[v];else for(var _=l.length+s.length-c.length;_<s.length;_++)h[_]=s[_];var g=l.length-(l[l.length-1]>15?1:0);u=i?g+(g>2?Math.ceil(g/2)-1:0):g}return{value:(0,r.byte2HexString)(h,o,i),cursor:u}},UIDInputChange:function(a,t,e,d){var o=(0,r.string2HexByte)(a),i=(0,r.byte2HexString)(o,e,d),c=t;if(-1!=c){var s=a.slice(0,c),h=(0,r.string2HexByte)(s),u=h.length-(h[h.length-1]>15?1:0);c=d?u+(u>2?Math.ceil(u/2)-1:0):u}return{value:i,cursor:c}},CreatNewMFData:function(){var a=new e.cardUtil;this.onRefreshUID();var t=(0,r.string2Hex)(this.data.cardhub.card_uid.value),d=(0,r.string2Hex)(this.data.cardhub.card_atqa.value),o=(0,r.string2Hex)(this.data.cardhub.card_sak.value),i=(0,r.string2Hex)(this.data.cardhub.card_proID.value);return this.FillMFCardInfo(t,d,o,i),a.SetEmptyMFTagDataBySectors(this.data.cardhub.data_info.uid,this.data.cardhub.data_info.ATQA,this.data.cardhub.data_info.sak,this.data.cardhub.data_info.proID,this.data.cardhub.data_info.num_sectors)},onSectorNumChange:function(a){var t=a.detail.value;this.setData({"EditTag.select_sector":t})}});
},{isPage:true,isComponent:true,currentFile:'pages/DataControl/DataModify.js'});require("pages/DataControl/DataModify.js");