$gwx_XC_53=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_53 || [];
function gz$gwx_XC_53_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_53_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_53_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_53_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([1,false])
Z([3,'bottom'])
Z([[6],[[6],[[7],[3,'EditWIFI']],[3,'select']],[3,'show']])
Z([3,'popup-block'])
Z([3,'popup-btn'])
Z([3,'wifi'])
Z([3,'42rpx'])
Z([3,'popup-body'])
Z([[6],[[6],[[7],[3,'EditWIFI']],[3,'select']],[3,'loading']])
Z([3,'vertical'])
Z([3,'72rpx'])
Z([3,'加载中...'])
Z([3,'circular'])
Z([[6],[[6],[[7],[3,'EditWIFI']],[3,'select']],[3,'list']])
Z([3,'index'])
Z([3,'onSelectWifiItem'])
Z([[6],[[7],[3,'item']],[3,'SSID']])
Z([[6],[[7],[3,'item']],[3,'BSSID']])
Z(z[5])
Z(z[16])
Z([[2,'==='],[[7],[3,'id']],[1,'phone']])
Z([3,'body'])
Z([3,'title-abreast'])
Z([3,'onPhoneInput'])
Z([3,'请输入电话号码'])
Z([[6],[[7],[3,'EditPhone']],[3,'value']])
Z([3,'onSelectContact'])
Z([3,'title-icon'])
Z([3,'green'])
Z([3,'phone'])
Z([3,'user'])
Z([3,'38rpx'])
Z([3,'onAddData'])
Z(z[29])
Z([3,'1'])
Z([3,'large'])
Z([3,'primary'])
Z([3,'outline'])
Z([[2,'==='],[[7],[3,'id']],[1,'card']])
Z([3,'true'])
Z([a,[3,'max-height:'],[[7],[3,'scroll_height']],[3,'px;']])
Z(z[22])
Z([3,'onCardNameInput'])
Z([3,'姓名：'])
Z([3,'请输入姓名'])
Z([[6],[[7],[3,'EditCard']],[3,'name']])
Z(z[26])
Z(z[27])
Z(z[28])
Z([3,'card'])
Z(z[30])
Z(z[31])
Z([3,'onCardPhoneInput'])
Z([3,'电话：'])
Z([3,'请输入电话'])
Z([[6],[[7],[3,'EditCard']],[3,'phone']])
Z([3,'onCardCompanyInput'])
Z([3,'公司：'])
Z([3,'请输入公司名称'])
Z([[6],[[7],[3,'EditCard']],[3,'company']])
Z([3,'onCardEmailInput'])
Z([3,'邮件：'])
Z([3,'请输入邮件'])
Z([[6],[[7],[3,'EditCard']],[3,'email']])
Z([3,'onCardWebInput'])
Z([3,'网站：'])
Z([3,'请输入网站'])
Z([[6],[[7],[3,'EditCard']],[3,'web']])
Z([[7],[3,'autosize']])
Z([3,'onCardAddressInput'])
Z([3,'textarea-label'])
Z([1,true])
Z([3,'地址：'])
Z([3,'请输入地址'])
Z([3,'textarea-border'])
Z([[6],[[7],[3,'EditCard']],[3,'address']])
Z(z[32])
Z(z[49])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'BLE']])
Z(z[39])
Z([a,z[40][1],z[40][2],z[40][3]])
Z([3,'onBLENameInput'])
Z([3,'请输入设备名称'])
Z([[6],[[7],[3,'EditBLE']],[3,'name']])
Z([3,'onBLEMACInput'])
Z([3,'XX:XX:XX:XX:XX:XX'])
Z([[6],[[7],[3,'EditBLE']],[3,'mac']])
Z(z[32])
Z([3,'BLE'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'WIFI']])
Z(z[39])
Z([a,z[40][1],z[40][2],z[40][3]])
Z([3,'popup-dropdown'])
Z([3,'onWIFIEncryChange'])
Z([[6],[[7],[3,'EditWIFI']],[3,'options']])
Z([[6],[[7],[3,'EditWIFI']],[3,'encry']])
Z(z[22])
Z([3,'onWIFISSIDInput'])
Z([3,'请输入SSID'])
Z([[6],[[7],[3,'EditWIFI']],[3,'SSID']])
Z([3,'onSelectWifi'])
Z(z[27])
Z(z[28])
Z(z[29])
Z(z[5])
Z(z[31])
Z([3,'onWIFIpasswordInput'])
Z([3,'请输入密码'])
Z([3,'password'])
Z([[6],[[7],[3,'EditWIFI']],[3,'password']])
Z(z[32])
Z([3,'WIFI'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'APP']])
Z(z[21])
Z([3,'onAppNameInput'])
Z([3,'com.xxxxx.xxxxx'])
Z([[6],[[7],[3,'EditApp']],[3,'value']])
Z(z[32])
Z([3,'APP'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'location']])
Z(z[21])
Z(z[22])
Z([3,'onLocationLatitudeInput'])
Z([3,'xxx.xxxxxx'])
Z([[6],[[7],[3,'EditLocation']],[3,'latitude']])
Z([3,'onSelectLocation'])
Z(z[27])
Z([3,'blue'])
Z([3,'map-location'])
Z(z[6])
Z([3,'onLocationLongitudeInput'])
Z(z[139])
Z([[6],[[7],[3,'EditLocation']],[3,'longitude']])
Z(z[32])
Z([3,'location'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'TXT']])
Z(z[21])
Z(z[68])
Z([3,'onTextDataInput'])
Z(z[71])
Z([3,'请输入...'])
Z(z[74])
Z([[6],[[7],[3,'EditText']],[3,'value']])
Z(z[32])
Z([3,'TXT'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'URL']])
Z(z[39])
Z([a,z[40][1],z[40][2],z[40][3]])
Z(z[100])
Z([3,'onInputURLChange'])
Z([[6],[[7],[3,'EditURL']],[3,'options']])
Z([[6],[[7],[3,'EditURL']],[3,'type']])
Z(z[68])
Z([3,'onURLInput'])
Z(z[71])
Z([3,'请输入网址'])
Z([[6],[[7],[3,'EditURL']],[3,'URL']])
Z(z[32])
Z([3,'URL'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
Z([[2,'==='],[[7],[3,'id']],[1,'custom']])
Z(z[21])
Z([3,'onCustomDataTypeInput'])
Z([3,'text/plain'])
Z([[6],[[7],[3,'EditData']],[3,'type']])
Z([3,'onCustomDataDataInput'])
Z([3,'请输入数据'])
Z([[6],[[7],[3,'EditData']],[3,'value']])
Z(z[32])
Z([3,'custom'])
Z(z[34])
Z(z[35])
Z(z[36])
Z(z[37])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_53_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_53_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_53=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_53=true;
var x=['./pages/DataControl/NdefTagRecord.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_53_1()
var b9W=_mz(z,'t-popup',['closeOnOverlayClick',0,'placement',1,'visible',1],[],e,s,gg)
var o0W=_n('view')
_rz(z,o0W,'class',3,e,s,gg)
var xAX=_mz(z,'t-icon',['class',4,'name',1,'size',2],[],e,s,gg)
_(o0W,xAX)
var oBX=_n('view')
_rz(z,oBX,'class',7,e,s,gg)
var fCX=_v()
_(oBX,fCX)
if(_oz(z,8,e,s,gg)){fCX.wxVkey=1
var cDX=_mz(z,'t-loading',['layout',9,'size',1,'text',2,'theme',3],[],e,s,gg)
_(fCX,cDX)
}
else{fCX.wxVkey=2
var hEX=_v()
_(fCX,hEX)
var oFX=function(oHX,cGX,lIX,gg){
var tKX=_mz(z,'t-cell',['hover',-1,'bind:click',15,'data-id',1,'description',2,'leftIcon',3,'title',4],[],oHX,cGX,gg)
_(lIX,tKX)
return lIX
}
hEX.wxXCkey=4
_2z(z,13,oFX,e,s,gg,hEX,'item','index','index')
}
fCX.wxXCkey=1
fCX.wxXCkey=3
fCX.wxXCkey=3
_(o0W,oBX)
_(b9W,o0W)
_(r,b9W)
var e8W=_v()
_(r,e8W)
if(_oz(z,20,e,s,gg)){e8W.wxVkey=1
var eLX=_n('view')
_rz(z,eLX,'class',21,e,s,gg)
var bMX=_n('view')
_rz(z,bMX,'class',22,e,s,gg)
var oNX=_mz(z,'t-input',['bindchange',23,'placeholder',1,'value',2],[],e,s,gg)
_(bMX,oNX)
var xOX=_mz(z,'t-icon',['bind:click',26,'class',1,'color',2,'data-id',3,'name',4,'size',5],[],e,s,gg)
_(bMX,xOX)
_(eLX,bMX)
var oPX=_mz(z,'t-button',['block',-1,'bind:tap',32,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(eLX,oPX)
_(e8W,eLX)
}
else if(_oz(z,38,e,s,gg)){e8W.wxVkey=2
var fQX=_mz(z,'scroll-view',['scrollY',39,'style',1],[],e,s,gg)
var cRX=_n('view')
_rz(z,cRX,'class',41,e,s,gg)
var hSX=_mz(z,'t-input',['bindchange',42,'label',1,'placeholder',2,'value',3],[],e,s,gg)
_(cRX,hSX)
var oTX=_mz(z,'t-icon',['bind:click',46,'class',1,'color',2,'data-id',3,'name',4,'size',5],[],e,s,gg)
_(cRX,oTX)
_(fQX,cRX)
var cUX=_mz(z,'t-input',['bindchange',52,'label',1,'placeholder',2,'value',3],[],e,s,gg)
_(fQX,cUX)
var oVX=_mz(z,'t-input',['bindchange',56,'label',1,'placeholder',2,'value',3],[],e,s,gg)
_(fQX,oVX)
var lWX=_mz(z,'t-input',['bindchange',60,'label',1,'placeholder',2,'value',3],[],e,s,gg)
_(fQX,lWX)
var aXX=_mz(z,'t-input',['bindchange',64,'label',1,'placeholder',2,'value',3],[],e,s,gg)
_(fQX,aXX)
var tYX=_mz(z,'t-textarea',['autosize',68,'bindchange',1,'class',2,'disableDefaultPadding',3,'label',4,'placeholder',5,'tClass',6,'value',7],[],e,s,gg)
_(fQX,tYX)
var eZX=_mz(z,'t-button',['block',-1,'bind:tap',76,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(fQX,eZX)
_(e8W,fQX)
}
else if(_oz(z,82,e,s,gg)){e8W.wxVkey=3
var b1X=_mz(z,'scroll-view',['scrollY',83,'style',1],[],e,s,gg)
var o2X=_mz(z,'t-input',['bindchange',85,'placeholder',1,'value',2],[],e,s,gg)
_(b1X,o2X)
var x3X=_mz(z,'t-input',['bindchange',88,'placeholder',1,'value',2],[],e,s,gg)
_(b1X,x3X)
var o4X=_mz(z,'t-button',['block',-1,'bind:tap',91,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(b1X,o4X)
_(e8W,b1X)
}
else if(_oz(z,97,e,s,gg)){e8W.wxVkey=4
var f5X=_mz(z,'scroll-view',['scrollY',98,'style',1],[],e,s,gg)
var c6X=_n('t-dropdown-menu')
_rz(z,c6X,'tClass',100,e,s,gg)
var h7X=_mz(z,'t-dropdown-item',['bindchange',101,'options',1,'value',2],[],e,s,gg)
_(c6X,h7X)
_(f5X,c6X)
var o8X=_n('view')
_rz(z,o8X,'class',104,e,s,gg)
var c9X=_mz(z,'t-input',['bindchange',105,'placeholder',1,'value',2],[],e,s,gg)
_(o8X,c9X)
var o0X=_mz(z,'t-icon',['bind:click',108,'class',1,'color',2,'data-id',3,'name',4,'size',5],[],e,s,gg)
_(o8X,o0X)
_(f5X,o8X)
var lAY=_mz(z,'t-input',['bindchange',114,'placeholder',1,'type',2,'value',3],[],e,s,gg)
_(f5X,lAY)
var aBY=_mz(z,'t-button',['block',-1,'bind:tap',118,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(f5X,aBY)
_(e8W,f5X)
}
else if(_oz(z,124,e,s,gg)){e8W.wxVkey=5
var tCY=_n('view')
_rz(z,tCY,'class',125,e,s,gg)
var eDY=_mz(z,'t-input',['bindchange',126,'placeholder',1,'value',2],[],e,s,gg)
_(tCY,eDY)
var bEY=_mz(z,'t-button',['block',-1,'bind:tap',129,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(tCY,bEY)
_(e8W,tCY)
}
else if(_oz(z,135,e,s,gg)){e8W.wxVkey=6
var oFY=_n('view')
_rz(z,oFY,'class',136,e,s,gg)
var xGY=_n('view')
_rz(z,xGY,'class',137,e,s,gg)
var oHY=_mz(z,'t-input',['bindchange',138,'placeholder',1,'value',2],[],e,s,gg)
_(xGY,oHY)
var fIY=_mz(z,'t-icon',['bind:click',141,'class',1,'color',2,'name',3,'size',4],[],e,s,gg)
_(xGY,fIY)
_(oFY,xGY)
var cJY=_mz(z,'t-input',['bindchange',146,'placeholder',1,'value',2],[],e,s,gg)
_(oFY,cJY)
var hKY=_mz(z,'t-button',['block',-1,'bind:tap',149,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(oFY,hKY)
_(e8W,oFY)
}
else if(_oz(z,155,e,s,gg)){e8W.wxVkey=7
var oLY=_n('view')
_rz(z,oLY,'class',156,e,s,gg)
var cMY=_mz(z,'t-textarea',['autosize',157,'bindchange',1,'disableDefaultPadding',2,'placeholder',3,'tClass',4,'value',5],[],e,s,gg)
_(oLY,cMY)
var oNY=_mz(z,'t-button',['block',-1,'bind:tap',163,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(oLY,oNY)
_(e8W,oLY)
}
else if(_oz(z,169,e,s,gg)){e8W.wxVkey=8
var lOY=_mz(z,'scroll-view',['scrollY',170,'style',1],[],e,s,gg)
var aPY=_n('t-dropdown-menu')
_rz(z,aPY,'tClass',172,e,s,gg)
var tQY=_mz(z,'t-dropdown-item',['bindchange',173,'options',1,'value',2],[],e,s,gg)
_(aPY,tQY)
_(lOY,aPY)
var eRY=_mz(z,'t-input',['autosize',176,'bindchange',1,'disableDefaultPadding',2,'placeholder',3,'value',4],[],e,s,gg)
_(lOY,eRY)
var bSY=_mz(z,'t-button',['block',-1,'bind:tap',181,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(lOY,bSY)
_(e8W,lOY)
}
else if(_oz(z,187,e,s,gg)){e8W.wxVkey=9
var oTY=_n('view')
_rz(z,oTY,'class',188,e,s,gg)
var xUY=_mz(z,'t-input',['bindchange',189,'placeholder',1,'value',2],[],e,s,gg)
_(oTY,xUY)
var oVY=_mz(z,'t-input',['bindchange',192,'placeholder',1,'value',2],[],e,s,gg)
_(oTY,oVY)
var fWY=_mz(z,'t-button',['block',-1,'bind:tap',195,'data-id',1,'data-type',2,'size',3,'theme',4,'variant',5],[],e,s,gg)
_(oTY,fWY)
_(e8W,oTY)
}
e8W.wxXCkey=1
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
e8W.wxXCkey=3
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_53";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_53();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/DataControl/NdefTagRecord.wxml'] = [$gwx_XC_53, './pages/DataControl/NdefTagRecord.wxml'];else __wxAppCode__['pages/DataControl/NdefTagRecord.wxml'] = $gwx_XC_53( './pages/DataControl/NdefTagRecord.wxml' );
	;__wxRoute = "pages/DataControl/NdefTagRecord";__wxRouteBegin = true;__wxAppCurrentFile__="pages/DataControl/NdefTagRecord.js";define("pages/DataControl/NdefTagRecord.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../utils/util"),a=getApp();Page({data:{id:"",type:"",index:-1,scroll_height:0,popup_scroll_height:0,autosize:{maxHeight:120,minHeight:28},EditPhone:{value:""},EditCard:{name:"",phone:"",company:"",email:"",web:"",address:""},EditBLE:{name:"",mac:""},EditWIFI:{select:{show:!1,loading:!1,list:[]},encry:"-",options:[{value:"-",label:"无"},{value:"WEP",label:"WEP"},{value:"WPA/WPA2",label:"WPA/WPA2"}],SSID:"",password:""},EditApp:{value:""},EditLocation:{latitude:"",longitude:""},EditText:{value:""},EditURL:{type:"http://",options:[{value:"http://",label:"http://"},{value:"https://",label:"https://"},{value:"ftp://",label:"ftp://"},{value:"sftp://",label:"sftp://"},{value:"file://",label:"file://"},{value:"rtsp://",label:"rtsp://"},{value:"telnet://",label:"telnet://"},{value:"smb://",label:"smb://"},{value:"nfs://",label:"nfs://"},{value:"dav://",label:"dav://"},{value:"btspp://",label:"btspp://"},{value:"urn:",label:"urn:"},{value:"N/A",label:"无"}],URL:""},EditData:{type:"",value:""}},onLoad:function(t){var a=this;if(t.id){var e=null,i=t.type;"1"===i&&t.data&&t.index&&(e=JSON.parse(decodeURIComponent(t.data)),this.data.index=Number(t.index),console.log(e));var n="0"===i?"添加NFC标签卡记录":"编辑NFC标签卡记录";switch(t.id){case"phone":n="0"===i?"添加电话号码":"编辑电话号码","1"===i&&null!=e&&e.data&&e.data.length>=1&&this.setData({"EditPhone.value":e.data[0]});break;case"card":n="0"===i?"添加名片信息":"编辑名片信息","1"===i&&null!=e&&e.data&&e.data.length>=6&&this.setData({"EditCard.name":e.data[0],"EditCard.phone":e.data[1],"EditCard.company":e.data[2],"EditCard.email":e.data[3],"EditCard.web":e.data[4],"EditCard.address":e.data[5]});break;case"BLE":n="0"===i?"添加蓝牙连接":"编辑蓝牙连接","1"===i&&null!=e&&e.data&&e.data.length>=2&&this.setData({"EditBLE.name":e.data[0],"EditBLE.mac":e.data[1]});break;case"WIFI":n="0"===i?"配置Wi-Fi网络":"编辑Wi-Fi网络","1"===i&&null!=e&&e.data&&e.data.length>=3&&this.setData({"EditWIFI.encry":e.data[0],"EditWIFI.SSID":e.data[1],"EditWIFI.password":e.data[2]});break;case"APP":n="0"===i?"添加应用程序":"编辑应用程序","1"===i&&null!=e&&e.data&&e.data.length>=1&&this.setData({"EditApp.value":e.data[0]});break;case"location":if(n="0"===i?"添加位置信息":"编辑位置信息","0"===i)wx.getLocation({type:"wgs84",success:function(t){a.setData({"EditLocation.latitude":t.latitude,"EditLocation.longitude":t.longitude})},fail:function(t){wx.showToast({title:"获取地理位置失败",icon:"none",duration:3e3}),a.setData({"EditLocation.latitude":"","EditLocation.longitude":""})}});else if("1"===i&&null!=e&&e.data&&e.data.length>=1){var d=e.data[0].split(",");d.length>=2&&this.setData({"EditLocation.latitude":d[0],"EditLocation.longitude":d[1]})}break;case"TXT":n="0"===i?"添加文本记录":"编辑文本记录","1"===i&&null!=e&&e.data&&e.data.length>=1&&this.setData({"EditText.value":e.data[0]});break;case"URL":if(n="0"===i?"添加URL记录":"编辑URL记录","1"===i&&null!=e&&e.data&&e.data.length>=1){var o="N/A",s=e.data[0],l=s.indexOf("://");if(-1!=l){var h=s.slice(0,l+"://".length),u=s.slice(l+"://".length);s=u,this.GetProtocolId(h)>0&&(o=h.toLowerCase())}else{"urn:"===s.slice(0,4).toLowerCase()?(s=s.slice(4),o="urn:"):o="N/A"}this.setData({"EditURL.type":o,"EditURL.URL":s})}break;case"custom":n="0"===i?"添加自定义记录":"编辑自定义记录","1"===i&&null!=e&&e.data&&e.data.length>=2&&this.setData({"EditData.type":e.data[0],"EditData.value":e.data[1]})}this.setData({id:t.id,type:t.type}),wx.setNavigationBarTitle({title:n})}wx.startWifi({success:function(t){wx.onGetWifiList((function(t){for(var e=[],i=0;i<t.wifiList.length;i++){var n={SSID:t.wifiList[i].SSID,BSSID:t.wifiList[i].BSSID};e.push(n)}a.setData({"EditWIFI.select.loading":!1,"EditWIFI.select.list":e})}))}})},onReady:function(){var t=a.getSystemInfo(),e=t.the1rpx;this.setData({scroll_height:t.pageHeight-t.bottomSafeHeight-1,popup_scroll_height:t.pageHeight-256*e-t.bottomSafeHeight-1})},onShow:function(){},onHide:function(){},onUnload:function(){wx.offGetWifiList(),wx.stopWifi()},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},onAddData:function(a){var e=a.target.dataset,i=e.id,n=(e.type,{id:i,icon:"",type:"",title:"",data:[],value:[]});switch(i){case"phone":if(this.data.EditPhone.value.length<=0){wx.showToast({title:"请输入电话号码",icon:"none",duration:3e3});break}if(!(0,t.isNumber)(this.data.EditPhone.value)){wx.showToast({title:"请输入正确的电话号码",icon:"none",duration:3e3});break}n.value=this.NdefURI(5,this.data.EditPhone.value),n.title="电话号码",n.data.push(this.data.EditPhone.value),n.icon="call-1";break;case"card":if(this.data.EditCard.name.length<=0){wx.showToast({title:"请输入姓名",icon:"none",duration:3e3});break}if(this.data.EditCard.phone.length<=0){wx.showToast({title:"请输入电话号码",icon:"none",duration:3e3});break}n.value=this.NdefVcard(this.data.EditCard.name,this.data.EditCard.phone,this.data.EditCard.company,this.data.EditCard.address,this.data.EditCard.email,this.data.EditCard.web),n.title="名片",n.data.push(this.data.EditCard.name),n.data.push(this.data.EditCard.phone),n.data.push(this.data.EditCard.company),n.data.push(this.data.EditCard.email),n.data.push(this.data.EditCard.web),n.data.push(this.data.EditCard.address),n.icon="verify";break;case"BLE":if(this.data.EditBLE.name.length>24){wx.showToast({title:"设备名称太长",icon:"none",duration:3e3});break}if(!(0,t.isMac)(this.data.EditBLE.mac)){wx.showToast({title:"请输入正确的Mac地址",icon:"none",duration:3e3});break}n.value=this.NdefMediaType(this.data.EditBLE.mac,this.data.EditBLE.name),n.title="蓝牙",n.data.push(this.data.EditBLE.name),n.data.push(this.data.EditBLE.mac),n.icon="bluetooth";break;case"WIFI":if(this.data.EditWIFI.SSID.length<=0){wx.showToast({title:"请输入SSID",icon:"none",duration:3e3});break}if(this.data.EditWIFI.password.length<=0||this.data.EditWIFI.password.length>64){wx.showToast({title:"请输入密码",icon:"none",duration:3e3});break}n.value=this.NdefWifi(this.data.EditWIFI.encry,this.data.EditWIFI.SSID,this.data.EditWIFI.password),n.title="Wi-Fi网络",n.data.push(this.data.EditWIFI.encry),n.data.push(this.data.EditWIFI.SSID),n.data.push(this.data.EditWIFI.password),n.icon="wifi";break;case"APP":if(this.data.EditApp.value.length<=0||!(0,t.isAppName)(this.data.EditApp.value)){wx.showToast({title:"请输入程序包名",icon:"none",duration:3e3});break}n.value=this.NdefApp(this.data.EditApp.value),n.title="应用程序",n.data.push(this.data.EditApp.value),n.icon="app";break;case"location":if(!(0,t.isLocation)(this.data.EditLocation.latitude)){wx.showToast({title:"请输入纬度值",icon:"none",duration:3e3});break}if(!(0,t.isLocation)(this.data.EditLocation.longitude)){wx.showToast({title:"请输入经度值",icon:"none",duration:3e3});break}var d="geo:"+this.data.EditLocation.latitude+","+this.data.EditLocation.longitude;n.value=this.NdefURI(0,d),n.title="位置",n.data.push(this.data.EditLocation.latitude+","+this.data.EditLocation.longitude),n.icon="location";break;case"TXT":if(this.data.EditText.value.length<=0){wx.showToast({title:"请输入文本",icon:"none",duration:3e3});break}n.value=this.NdefTxt(this.data.EditText.value),n.title="文本",n.data.push(this.data.EditText.value),n.icon="textbox";break;case"URL":var o=0,s=this.data.EditURL.type,l=this.data.EditURL.URL,h=l;if(l.length<=0){wx.showToast({title:"请输入网址",icon:"none",duration:3e3});break}if("urn:"!==this.data.EditURL.type&&"N/A"!==this.data.EditURL.type){if(!(0,t.isURL)(l)){wx.showToast({title:"请输入正确的网址",icon:"none",duration:3e3});break}var u=l.indexOf("://");if(-1!=u){s=l.slice(0,u+"://".length);var r=l.slice(u+"://".length);l=r}else h=this.data.EditURL.type+l;o=this.GetProtocolId(s)}else if("N/A"===this.data.EditURL.type){o=0;var c=l.indexOf("://");if(-1!=c&&(s=l.slice(0,c+"://".length),0!==(o=this.GetProtocolId(s)))){var p=l.slice(c+"://".length);l=p}}else{"urn:"===l.slice(0,4).toLowerCase()&&(l=l.slice(4)),h=this.data.EditURL.type+l,o=19}if(4===o||3===o)"www."===l.slice(0,4).toLowerCase()&&(l=l.slice(4),o-=2);n.value=this.NdefURI(o,l),n.title="URL",n.data.push(h),n.icon="link";break;case"custom":if(this.data.EditData.type.length<=0){wx.showToast({title:"请输入内容类型",icon:"none",duration:3e3});break}if(this.data.EditData.value.length<=0){wx.showToast({title:"请输入数据",icon:"none",duration:3e3});break}var f=unescape(encodeURIComponent(this.data.EditData.value));n.value=this.SetNdefData(2,this.data.EditData.type,f),n.title="数据",n.data.push(this.data.EditData.type),n.data.push(this.data.EditData.value),n.icon="data"}if(n.icon.length>0){n.title+="："+n.value.length+"字节";var E=getCurrentPages();if(E.length>=2)for(var g=0,v=E.length-2;v>=0;v--){g++;var I=E[v];if("pages/DataControl/setNFCTag"===I.route){"0"===this.data.type?I.AddRecord(n):I.UpdateRecord(n,this.data.index),setTimeout((function(){wx.navigateBack({delta:g})}),100);break}}}},onSelectContact:function(t){var a=this,e=t.target.dataset.id;wx.chooseContact({success:function(t){"phone"===e?a.setData({"EditPhone.value":t.phoneNumber}):"card"===e&&a.setData({"EditCard.name":t.displayName,"EditCard.phone":t.phoneNumber})},fail:function(t){wx.showToast({title:"获取通讯录失败",icon:"none",duration:3e3})}})},onSelectWifi:function(t){var a=this;wx.getWifiList({success:function(t){},fail:function(t){wx.showToast({title:"获取Wi-Fi列表失败",icon:"none",duration:3e3}),setTimeout((function(){a.setData({"EditWIFI.select.show":!1})}),1e3)}}),a.setData({"EditWIFI.select.show":!0,"EditWIFI.select.loading":!0,"EditWIFI.select.list":[]})},onSelectWifiItem:function(t){var a=t.target.dataset.id;this.setData({"EditWIFI.select.show":!1,"EditWIFI.SSID":a})},closeSelectWifiDialog:function(t){this.setData({"EditWIFI.select.show":!1})},onWIFIEncryChange:function(t){this.setData({"EditWIFI.encry":t.detail.value})},onSelectLocation:function(t){var a=this;wx.chooseLocation({success:function(t){a.setData({"EditLocation.latitude":t.latitude,"EditLocation.longitude":t.longitude})},fail:function(t){wx.showToast({title:"选择地理位置失败",icon:"none",duration:3e3})}})},onInputURLChange:function(t){this.setData({"EditURL.type":t.detail.value})},onPhoneInput:function(t){this.data.EditPhone.value=t.detail.value},onCardNameInput:function(t){this.data.EditCard.name=t.detail.value},onCardPhoneInput:function(t){this.data.EditCard.phone=t.detail.value},onCardCompanyInput:function(t){this.data.EditCard.company=t.detail.value},onCardEmailInput:function(t){this.data.EditCard.email=t.detail.value},onCardWebInput:function(t){this.data.EditCard.web=t.detail.value},onCardAddressInput:function(t){this.data.EditCard.address=t.detail.value},onBLENameInput:function(t){this.data.EditBLE.name=t.detail.value},onBLEMACInput:function(t){this.data.EditBLE.mac=t.detail.value},onWIFISSIDInput:function(t){this.data.EditWIFI.SSID=t.detail.value},onWIFIpasswordInput:function(t){this.data.EditWIFI.password=t.detail.value},onAppNameInput:function(t){this.data.EditApp.value=t.detail.value},onLocationLatitudeInput:function(t){this.data.EditLocation.latitude=t.detail.value},onLocationLongitudeInput:function(t){this.data.EditLocation.longitude=t.detail.value},onTextDataInput:function(t){this.data.EditText.value=t.detail.value},onURLInput:function(t){this.data.EditURL.URL=t.detail.value},onCustomDataTypeInput:function(t){this.data.EditData.type=t.detail.value},onCustomDataDataInput:function(t){this.data.EditData.value=t.detail.value},NdefTxt:function(t){var a=unescape(encodeURIComponent(t)),e=31&"en".length,i=String.fromCharCode(e)+"en"+a;return this.SetNdefData(1,"T",i)},NdefURI:function(t,a){var e=unescape(encodeURIComponent(a)),i=String.fromCharCode(t)+e;return this.SetNdefData(1,"U",i)},NdefMediaType:function(a,e){var i="";e.length>0&&(i=unescape(encodeURIComponent(e)));for(var n=8+(i.length>0?i.length+2:0),d=String.fromCharCode(n)+"\0",o=(0,t.string2Hex)(a),s=0;s<6&&s<o.length;s++)d+=String.fromCharCode(o[o.length-1-s]);return i.length>0&&(d+=String.fromCharCode(i.length+1),d+="\t",d+=i),this.SetNdefData(2,"application/vnd.bluetooth.ep.oob",d)},NdefApp:function(t){return this.SetNdefData(4,"android.com:pkg",t)},NdefVcard:function(t,a,e,i,n,d){var o="BEGIN:VCARD\n";o+="VERSION:3.0\n",t.length>0&&(o+="FN:"+t+"\n"),a.length>0&&(o+="TEL:"+a+"\n"),e.length>0&&(o+="ORG:"+e+"\n"),i.length>0&&(o+="ADR:"+i+"\n"),n.length>0&&(o+="EMAIL:"+n+"\n"),d.length>0&&(o+="URL:"+d+"\n"),o+="END:VCARD";var s=unescape(encodeURIComponent(o));return this.SetNdefData(2,"text/vcard",s)},NdefWifi:function(t,a,e){var i="J\0",n="";n+="&\0E";var d=unescape(encodeURIComponent(a));n+=String.fromCharCode(d.length>>8&255),n+=String.fromCharCode(255&d.length),n+=d,n+="\0\0 \0",n+="WPA/WPA2"===t?"\0\b":"WEP"===t?"\0":"\0",n+="'\0";var o=unescape(encodeURIComponent(e));n+=String.fromCharCode(o.length),n+=o;var s=(n+=" \0ÿÿÿÿÿÿÿÿ\0\0").length;return i+=String.fromCharCode(s>>8&255),i+=String.fromCharCode(255&s),i+=n,this.SetNdefData(2,"application/vnd.wfa.wsc",i)},SetNdefData:function(t,a,e){var i=e.length+a.length,n=3;e.length>255?(t&=15,i+=n=6):(t|=16,i+=n);var d=new Array(i).fill(0);d[0]=t,d[1]=a.length,16==(16&t)?d[2]=e.length:(d[2]=e.length>>24&255,d[3]=e.length>>16&255,d[4]=e.length>>8&255,d[5]=255&e.length);for(var o=0;o<a.length;o++)d[n+o]=a.charCodeAt(o);for(var s=0;s<e.length;s++)d[n+a.length+s]=e.charCodeAt(s);return d},GetProtocolId:function(t){var a=0;switch(t.toLowerCase()){case"http://":a=3;break;case"https://":a=4;break;case"ftp://":a=13;break;case"sftp://":a=10;break;case"file://":a=29;break;case"rtsp://":a=18;break;case"telnet://":a=16;break;case"smb://":a=11;break;case"nfs://":a=12;break;case"dav://":a=14;break;case"btspp://":a=24}return a}});
},{isPage:true,isComponent:true,currentFile:'pages/DataControl/NdefTagRecord.js'});require("pages/DataControl/NdefTagRecord.js");