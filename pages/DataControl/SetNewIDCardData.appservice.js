$gwx_XC_54=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_54 || [];
function gz$gwx_XC_54_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_54_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_54_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_54_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'t-toast'])
Z([3,'ID卡数据'])
Z([3,'onModelPicker'])
Z([[7],[3,'modelText']])
Z([3,'型号/频率'])
Z([3,'onUIDSelect'])
Z([[7],[3,'UIDText']])
Z([3,'UID'])
Z([3,'onAddIDData'])
Z([3,'large'])
Z([3,'primary'])
Z([3,'outline'])
Z([1,false])
Z([3,'bottom'])
Z([[7],[3,'showEditTagDialog']])
Z([3,'popup-block'])
Z([3,'onInputBitsChange'])
Z([[6],[[7],[3,'Bits']],[3,'options']])
Z([[6],[[7],[3,'Bits']],[3,'value']])
Z([3,'onRefreshUID'])
Z([3,'refresh'])
Z([3,'green'])
Z(z[20])
Z([3,'38rpx'])
Z([3,'onPickerCancel'])
Z([3,'onPickerChange'])
Z([3,'onColumnChange'])
Z([3,'取消'])
Z([3,'确认'])
Z([3,'选择型号/频率'])
Z([[7],[3,'modelValue']])
Z([[7],[3,'modelVisible']])
Z([[7],[3,'models']])
Z([[7],[3,'freq_list']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_54_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_54_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_54=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_54=true;
var x=['./pages/DataControl/SetNewIDCardData.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_54_1()
var hYY=_n('t-toast')
_rz(z,hYY,'id',0,e,s,gg)
_(r,hYY)
var oZY=_n('t-cell-group')
_rz(z,oZY,'title',1,e,s,gg)
var c1Y=_mz(z,'t-cell',['arrow',-1,'hover',-1,'bind:click',2,'note',1,'title',2],[],e,s,gg)
_(oZY,c1Y)
var o2Y=_mz(z,'t-cell',['arrow',-1,'hover',-1,'bind:click',5,'note',1,'title',2],[],e,s,gg)
_(oZY,o2Y)
_(r,oZY)
var l3Y=_mz(z,'t-button',['block',-1,'bind:tap',8,'size',1,'theme',2,'variant',3],[],e,s,gg)
_(r,l3Y)
var a4Y=_mz(z,'t-popup',['closeOnOverlayClick',12,'placement',1,'visible',2],[],e,s,gg)
var t5Y=_n('view')
_rz(z,t5Y,'class',15,e,s,gg)
var e6Y=_n('t-dropdown-menu')
var b7Y=_mz(z,'t-dropdown-item',['bindchange',16,'options',1,'value',2],[],e,s,gg)
_(e6Y,b7Y)
_(t5Y,e6Y)
var o8Y=_mz(z,'t-icon',['bind:click',19,'class',1,'color',2,'name',3,'size',4],[],e,s,gg)
_(t5Y,o8Y)
_(a4Y,t5Y)
_(r,a4Y)
var x9Y=_mz(z,'t-picker',['usingCustomNavbar',-1,'bindcancel',24,'bindchange',1,'bindpick',2,'cancelBtn',3,'confirmBtn',4,'title',5,'value',6,'visible',7],[],e,s,gg)
var o0Y=_n('t-picker-item')
_rz(z,o0Y,'options',32,e,s,gg)
_(x9Y,o0Y)
var fAZ=_n('t-picker-item')
_rz(z,fAZ,'options',33,e,s,gg)
_(x9Y,fAZ)
_(r,x9Y)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_54";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_54();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/DataControl/SetNewIDCardData.wxml'] = [$gwx_XC_54, './pages/DataControl/SetNewIDCardData.wxml'];else __wxAppCode__['pages/DataControl/SetNewIDCardData.wxml'] = $gwx_XC_54( './pages/DataControl/SetNewIDCardData.wxml' );
	;__wxRoute = "pages/DataControl/SetNewIDCardData";__wxRouteBegin = true;__wxAppCurrentFile__="pages/DataControl/SetNewIDCardData.js";define("pages/DataControl/SetNewIDCardData.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t,e=require("../../utils/util"),a=require("../../utils/cardUtil"),i=(t=require("tdesign-miniprogram/toast/index"))&&t.__esModule?t:{default:t};getApp();Page({data:{input_style:"border-bottom: 0.5px solid rgba(220,220,220,0.4);color:#000;",input_error_sytle:"border-bottom: 0.5px solid rgba(220,0,0,0.8);color:#FF0000;",showEditTagDialog:!1,modelVisible:!1,modelText:"",modelValue:["ID","125KHz"],models:[{label:"ID",value:"ID"}],freq_list:[{label:"125KHz",value:"125KHz"},{label:"175KHz",value:"175KHz"},{label:"250KHz",value:"250KHz"},{label:"300KHz",value:"300KHz"},{label:"375KHz",value:"375KHz"},{label:"500KHz",value:"500KHz"}],Bits:{value:"HEX",options:[{value:"HEX",label:"十六进数据"},{value:"6H_8D",label:"十进制8位"},{value:"8H_10D",label:"十进制10位"}]},card_uid:{select_uid:[],UID:"UID",value:"",cursor:0,error:!1,placeholder:"FFFFFFFFFF",maxlength:10}},onLoad:function(){this.setData({modelValue:["ID","125KHz"],modelText:["ID","125KHz"].join(" ")})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},onModelPicker:function(){this.setData({modelVisible:!0})},onColumnChange:function(t){},onPickerChange:function(t){var e=t.detail,a=e.value,i=e.label;this.setData({modelVisible:!1,modelValue:a,modelText:i.join(" ")})},onPickerCancel:function(t){this.setData({modelVisible:!1})},onUIDSelect:function(t){this.setData({showEditTagDialog:!0})},EditTagDialog:function(t){var a=[],l="",r=this.data.card_uid.value;if(this.data.card_uid.select_uid=new Array(5).fill(0),"HEX"===this.data.Bits.value){for(var o=("0000000000"+r).slice(-10),s=0,d=(a=(0,e.string2Hex)(o)).length-1,n=0;d>=0&&n<3;d--,n++)s+=a[d]<<8*n;l=("0000000000"+(s>>>=0).toString(10)).slice(-10)}else{var u=("0000000000"+Number(r).toString(16)).slice(-10);a=(0,e.string2Hex)(u),l=("0000000000"+r).slice(-10)}if(a.length<=0)this.setData({"card_uid.error":!0});else{for(var c=0;c<a.length;c++)this.data.card_uid.select_uid[c]=a[c];var h=(0,e.hex2string)(this.data.card_uid.select_uid,this.data.card_uid.select_uid.length);h+="("+l+")",this.setData({showEditTagDialog:!1,UIDText:h}),(0,i.default)({context:this,selector:"#t-toast",message:"编辑完成"})}},closeEditTagDialog:function(){this.setData({showEditTagDialog:!1})},onRefreshUID:function(){var t=this.data.card_uid.maxlength;"HEX"===this.data.Bits.value&&(t=5);for(var e="",a=0;a<t;a++){"HEX"===this.data.Bits.value?e+=("00"+Math.floor(256*Math.random()).toString(16)).slice(-2).toUpperCase():e+=Math.floor(10*Math.random()).toString()}this.setData({"card_uid.value":e})},onInputBitsChange:function(t){var e="UID",a="",i=10;"HEX"===t.detail.value?(e="UID",a="FFFFFFFFFF",i=10):"6H_8D"===t.detail.value?(e="卡号",a="00000000",i=8):"8H_10D"===t.detail.value&&(e="卡号",a="0000000000",i=10),this.setData({"Bits.value":t.detail.value,"card_uid.UID":e,"card_uid.placeholder":a,"card_uid.maxlength":i,"card_uid.value":""})},onUIDInput:function(t){var e=t.detail,a=e.value,i=e.cursor,l=this.InputChange(a,i,this.data.card_uid.maxlength,!1);return this.setData({"card_uid.value":l.value,"card_uid.cursor":l.cursor}),l.value.length>0&&this.data.card_uid.error&&this.setData({"card_uid.error":!1}),{value:l.value,cursor:l.cursor}},InputChange:function(t,a,i,l){var r="",o=0;if("HEX"===this.data.Bits.value){var s=(0,e.string2HexByte)(t);r=(0,e.byte2HexString)(s,i,l),o=a}else{for(var d=(0,e.string2DecByte)(t),n=0;n<d.length;n++)r+=d[n].toString();o=a}if(-1!=o){var u=[],c=t.slice(0,o),h=(u="HEX"===this.data.Bits.value?(0,e.string2HexByte)(c):(0,e.string2DecByte)(c)).length-(u[u.length-1]>15?1:0);o=l?h+(h>2?Math.ceil(h/2)-1:0):h}return{value:r,cursor:o}},onAddIDData:function(t){var l=new a.cardUtil;if(this.data.modelValue.length<=0)(0,i.default)({context:this,selector:"#t-toast",message:"请选择型号/频率"});else if(this.data.card_uid.select_uid.length<=0)(0,i.default)({context:this,selector:"#t-toast",message:"请输入UID"});else{console.log(this.data.modelValue[0],this.data.modelValue[1]);var r=(0,e.string2byte)(this.data.modelValue[0]),o=(0,e.string2byte)(this.data.modelValue[1]);console.log(r,o);for(var s=new Array(57).fill(0),d=0;d<o.length&&d<12;d++)s[d]=o[d];for(var n=0;n<r.length&&n<12;n++)s[12+n]=r[n];s[24]=this.data.card_uid.select_uid.length;for(var u=0;u<this.data.card_uid.select_uid.length&&u<32;u++)s[25+u]=this.data.card_uid.select_uid[u];var c=getCurrentPages();if(c.length>=2){var h=c[c.length-2];if("pages/DataControl/index"===h.route){for(var g="",v=0;v<57;v++)g+=("00"+s[v].toString(16)).slice(-2).toUpperCase();h.setCardData("新建数据",l.card_type.id,g,s)}}wx.navigateBack()}}});
},{isPage:true,isComponent:true,currentFile:'pages/DataControl/SetNewIDCardData.js'});require("pages/DataControl/SetNewIDCardData.js");